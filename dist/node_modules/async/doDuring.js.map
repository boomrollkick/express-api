{"version":3,"sources":["../../../src/node_modules/async/doDuring.js"],"names":["Object","defineProperty","exports","value","default","doDuring","_noop","require","_noop2","_interopRequireDefault","_slice","_slice2","_onlyOnce","_onlyOnce2","_wrapAsync","_wrapAsync2","obj","__esModule","fn","test","callback","_fn","_test","next","err","args","arguments","push","check","apply","truth","module"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;AAGAD,QAAQE,OAAR,GAAkBC,QAAlB;;AAEA,IAAIC,QAAQC,QAAQ,aAAR,CAAZ;;AAEA,IAAIC,SAASC,uBAAuBH,KAAvB,CAAb;;AAEA,IAAII,SAASH,QAAQ,kBAAR,CAAb;;AAEA,IAAII,UAAUF,uBAAuBC,MAAvB,CAAd;;AAEA,IAAIE,YAAYL,QAAQ,qBAAR,CAAhB;;AAEA,IAAIM,aAAaJ,uBAAuBG,SAAvB,CAAjB;;AAEA,IAAIE,aAAaP,QAAQ,sBAAR,CAAjB;;AAEA,IAAIQ,cAAcN,uBAAuBK,UAAvB,CAAlB;;AAEA,SAASL,sBAAT,CAAgCO,GAAhC,EAAqC;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEZ,SAASY,GAAX,EAArC;AAAwD;;AAE/F;;;;;;;;;;;;;;;;;;;;AAoBA,SAASX,QAAT,CAAkBa,EAAlB,EAAsBC,IAAtB,EAA4BC,QAA5B,EAAsC;AAClCA,eAAW,CAAC,GAAGP,WAAWT,OAAf,EAAwBgB,YAAYZ,OAAOJ,OAA3C,CAAX;AACA,QAAIiB,MAAM,CAAC,GAAGN,YAAYX,OAAhB,EAAyBc,EAAzB,CAAV;AACA,QAAII,QAAQ,CAAC,GAAGP,YAAYX,OAAhB,EAAyBe,IAAzB,CAAZ;;AAEA,aAASI,IAAT,CAAcC,GAAd,CAAkB,aAAlB,EAAiC;AAC7B,YAAIA,GAAJ,EAAS,OAAOJ,SAASI,GAAT,CAAP;AACT,YAAIC,OAAO,CAAC,GAAGd,QAAQP,OAAZ,EAAqBsB,SAArB,EAAgC,CAAhC,CAAX;AACAD,aAAKE,IAAL,CAAUC,KAAV;AACAN,cAAMO,KAAN,CAAY,IAAZ,EAAkBJ,IAAlB;AACH;;AAED,aAASG,KAAT,CAAeJ,GAAf,EAAoBM,KAApB,EAA2B;AACvB,YAAIN,GAAJ,EAAS,OAAOJ,SAASI,GAAT,CAAP;AACT,YAAI,CAACM,KAAL,EAAY,OAAOV,SAAS,IAAT,CAAP;AACZC,YAAIE,IAAJ;AACH;;AAEDK,UAAM,IAAN,EAAY,IAAZ;AACH;AACDG,OAAO7B,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"doDuring.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = doDuring;\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _slice = require('./internal/slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nvar _onlyOnce = require('./internal/onlyOnce');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The post-check version of [`during`]{@link module:ControlFlow.during}. To reflect the difference in\n * the order of operations, the arguments `test` and `fn` are switched.\n *\n * Also a version of [`doWhilst`]{@link module:ControlFlow.doWhilst} with asynchronous `test` function.\n * @name doDuring\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.during]{@link module:ControlFlow.during}\n * @category Control Flow\n * @param {AsyncFunction} fn - An async function which is called each time\n * `test` passes. Invoked with (callback).\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `fn`. Invoked with (...args, callback), where `...args` are the\n * non-error args from the previous callback of `fn`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `fn` has stopped. `callback`\n * will be passed an error if one occurred, otherwise `null`.\n */\nfunction doDuring(fn, test, callback) {\n    callback = (0, _onlyOnce2.default)(callback || _noop2.default);\n    var _fn = (0, _wrapAsync2.default)(fn);\n    var _test = (0, _wrapAsync2.default)(test);\n\n    function next(err /*, ...args*/) {\n        if (err) return callback(err);\n        var args = (0, _slice2.default)(arguments, 1);\n        args.push(check);\n        _test.apply(this, args);\n    };\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (!truth) return callback(null);\n        _fn(next);\n    }\n\n    check(null, true);\n}\nmodule.exports = exports['default'];"]}