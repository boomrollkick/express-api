{"version":3,"sources":["../../../src/node_modules/async/memoize.js"],"names":["Object","defineProperty","exports","value","default","memoize","_identity","require","_identity2","_interopRequireDefault","_slice","_slice2","_setImmediate","_setImmediate2","_initialParams","_initialParams2","_wrapAsync","_wrapAsync2","obj","__esModule","has","key","fn","hasher","memo","create","queues","_fn","memoized","args","callback","apply","push","concat","arguments","q","i","l","length","unmemoized","module"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;AAGAD,QAAQE,OAAR,GAAkBC,OAAlB;;AAEA,IAAIC,YAAYC,QAAQ,iBAAR,CAAhB;;AAEA,IAAIC,aAAaC,uBAAuBH,SAAvB,CAAjB;;AAEA,IAAII,SAASH,QAAQ,kBAAR,CAAb;;AAEA,IAAII,UAAUF,uBAAuBC,MAAvB,CAAd;;AAEA,IAAIE,gBAAgBL,QAAQ,yBAAR,CAApB;;AAEA,IAAIM,iBAAiBJ,uBAAuBG,aAAvB,CAArB;;AAEA,IAAIE,iBAAiBP,QAAQ,0BAAR,CAArB;;AAEA,IAAIQ,kBAAkBN,uBAAuBK,cAAvB,CAAtB;;AAEA,IAAIE,aAAaT,QAAQ,sBAAR,CAAjB;;AAEA,IAAIU,cAAcR,uBAAuBO,UAAvB,CAAlB;;AAEA,SAASP,sBAAT,CAAgCS,GAAhC,EAAqC;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEd,SAASc,GAAX,EAArC;AAAwD;;AAE/F,SAASE,GAAT,CAAaF,GAAb,EAAkBG,GAAlB,EAAuB;AACnB,WAAOA,OAAOH,GAAd;AACH;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,SAASb,OAAT,CAAiBiB,EAAjB,EAAqBC,MAArB,EAA6B;AACzB,QAAIC,OAAOxB,OAAOyB,MAAP,CAAc,IAAd,CAAX;AACA,QAAIC,SAAS1B,OAAOyB,MAAP,CAAc,IAAd,CAAb;AACAF,aAASA,UAAUf,WAAWJ,OAA9B;AACA,QAAIuB,MAAM,CAAC,GAAGV,YAAYb,OAAhB,EAAyBkB,EAAzB,CAAV;AACA,QAAIM,WAAW,CAAC,GAAGb,gBAAgBX,OAApB,EAA6B,SAASwB,QAAT,CAAkBC,IAAlB,EAAwBC,QAAxB,EAAkC;AAC1E,YAAIT,MAAME,OAAOQ,KAAP,CAAa,IAAb,EAAmBF,IAAnB,CAAV;AACA,YAAIT,IAAII,IAAJ,EAAUH,GAAV,CAAJ,EAAoB;AAChB,aAAC,GAAGR,eAAeT,OAAnB,EAA4B,YAAY;AACpC0B,yBAASC,KAAT,CAAe,IAAf,EAAqBP,KAAKH,GAAL,CAArB;AACH,aAFD;AAGH,SAJD,MAIO,IAAID,IAAIM,MAAJ,EAAYL,GAAZ,CAAJ,EAAsB;AACzBK,mBAAOL,GAAP,EAAYW,IAAZ,CAAiBF,QAAjB;AACH,SAFM,MAEA;AACHJ,mBAAOL,GAAP,IAAc,CAACS,QAAD,CAAd;AACAH,gBAAII,KAAJ,CAAU,IAAV,EAAgBF,KAAKI,MAAL,CAAY,YAAY,QAAQ;AAC5C,oBAAIJ,OAAO,CAAC,GAAGlB,QAAQP,OAAZ,EAAqB8B,SAArB,CAAX;AACAV,qBAAKH,GAAL,IAAYQ,IAAZ;AACA,oBAAIM,IAAIT,OAAOL,GAAP,CAAR;AACA,uBAAOK,OAAOL,GAAP,CAAP;AACA,qBAAK,IAAIe,IAAI,CAAR,EAAWC,IAAIF,EAAEG,MAAtB,EAA8BF,IAAIC,CAAlC,EAAqCD,GAArC,EAA0C;AACtCD,sBAAEC,CAAF,EAAKL,KAAL,CAAW,IAAX,EAAiBF,IAAjB;AACH;AACJ,aARe,CAAhB;AASH;AACJ,KApBc,CAAf;AAqBAD,aAASJ,IAAT,GAAgBA,IAAhB;AACAI,aAASW,UAAT,GAAsBjB,EAAtB;AACA,WAAOM,QAAP;AACH;AACDY,OAAOtC,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"memoize.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = memoize;\n\nvar _identity = require('lodash/identity');\n\nvar _identity2 = _interopRequireDefault(_identity);\n\nvar _slice = require('./internal/slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nvar _setImmediate = require('./internal/setImmediate');\n\nvar _setImmediate2 = _interopRequireDefault(_setImmediate);\n\nvar _initialParams = require('./internal/initialParams');\n\nvar _initialParams2 = _interopRequireDefault(_initialParams);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction has(obj, key) {\n    return key in obj;\n}\n\n/**\n * Caches the results of an async function. When creating a hash to store\n * function results against, the callback is omitted from the hash and an\n * optional hash function can be used.\n *\n * If no hash function is specified, the first argument is used as a hash key,\n * which may work reasonably if it is a string or a data type that converts to a\n * distinct string. Note that objects and arrays will not behave reasonably.\n * Neither will cases where the other arguments are significant. In such cases,\n * specify your own hash function.\n *\n * The cache of results is exposed as the `memo` property of the function\n * returned by `memoize`.\n *\n * @name memoize\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function to proxy and cache results from.\n * @param {Function} hasher - An optional function for generating a custom hash\n * for storing results. It has all the arguments applied to it apart from the\n * callback, and must be synchronous.\n * @returns {AsyncFunction} a memoized version of `fn`\n * @example\n *\n * var slow_fn = function(name, callback) {\n *     // do something\n *     callback(null, result);\n * };\n * var fn = async.memoize(slow_fn);\n *\n * // fn can now be used as if it were slow_fn\n * fn('some name', function() {\n *     // callback\n * });\n */\nfunction memoize(fn, hasher) {\n    var memo = Object.create(null);\n    var queues = Object.create(null);\n    hasher = hasher || _identity2.default;\n    var _fn = (0, _wrapAsync2.default)(fn);\n    var memoized = (0, _initialParams2.default)(function memoized(args, callback) {\n        var key = hasher.apply(null, args);\n        if (has(memo, key)) {\n            (0, _setImmediate2.default)(function () {\n                callback.apply(null, memo[key]);\n            });\n        } else if (has(queues, key)) {\n            queues[key].push(callback);\n        } else {\n            queues[key] = [callback];\n            _fn.apply(null, args.concat(function () /*args*/{\n                var args = (0, _slice2.default)(arguments);\n                memo[key] = args;\n                var q = queues[key];\n                delete queues[key];\n                for (var i = 0, l = q.length; i < l; i++) {\n                    q[i].apply(null, args);\n                }\n            }));\n        }\n    });\n    memoized.memo = memo;\n    memoized.unmemoized = fn;\n    return memoized;\n}\nmodule.exports = exports['default'];"]}