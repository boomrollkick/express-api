{"version":3,"sources":["../../../src/node_modules/async/seq.js"],"names":["Object","defineProperty","exports","value","default","seq","_noop","require","_noop2","_interopRequireDefault","_slice","_slice2","_reduce","_reduce2","_wrapAsync","_wrapAsync2","_arrayMap","_arrayMap2","obj","__esModule","_functions","arguments","args","that","cb","length","pop","newargs","fn","apply","concat","err","nextargs","results","module"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AACzCC,WAAO;AADkC,CAA7C;AAGAD,QAAQE,OAAR,GAAkBC,GAAlB;;AAEA,IAAIC,QAAQC,QAAQ,aAAR,CAAZ;;AAEA,IAAIC,SAASC,uBAAuBH,KAAvB,CAAb;;AAEA,IAAII,SAASH,QAAQ,kBAAR,CAAb;;AAEA,IAAII,UAAUF,uBAAuBC,MAAvB,CAAd;;AAEA,IAAIE,UAAUL,QAAQ,UAAR,CAAd;;AAEA,IAAIM,WAAWJ,uBAAuBG,OAAvB,CAAf;;AAEA,IAAIE,aAAaP,QAAQ,sBAAR,CAAjB;;AAEA,IAAIQ,cAAcN,uBAAuBK,UAAvB,CAAlB;;AAEA,IAAIE,YAAYT,QAAQ,kBAAR,CAAhB;;AAEA,IAAIU,aAAaR,uBAAuBO,SAAvB,CAAjB;;AAEA,SAASP,sBAAT,CAAgCS,GAAhC,EAAqC;AAAE,WAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEd,SAASc,GAAX,EAArC;AAAwD;;AAE/F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,SAASb,GAAT,GAAe,gBAAgB;AAC3B,QAAIe,aAAa,CAAC,GAAGH,WAAWb,OAAf,EAAwBiB,SAAxB,EAAmCN,YAAYX,OAA/C,CAAjB;AACA,WAAO,YAAY,WAAW;AAC1B,YAAIkB,OAAO,CAAC,GAAGX,QAAQP,OAAZ,EAAqBiB,SAArB,CAAX;AACA,YAAIE,OAAO,IAAX;;AAEA,YAAIC,KAAKF,KAAKA,KAAKG,MAAL,GAAc,CAAnB,CAAT;AACA,YAAI,OAAOD,EAAP,IAAa,UAAjB,EAA6B;AACzBF,iBAAKI,GAAL;AACH,SAFD,MAEO;AACHF,iBAAKhB,OAAOJ,OAAZ;AACH;;AAED,SAAC,GAAGS,SAAST,OAAb,EAAsBgB,UAAtB,EAAkCE,IAAlC,EAAwC,UAAUK,OAAV,EAAmBC,EAAnB,EAAuBJ,EAAvB,EAA2B;AAC/DI,eAAGC,KAAH,CAASN,IAAT,EAAeI,QAAQG,MAAR,CAAe,UAAUC,GAAV,CAAc,iBAAd,EAAiC;AAC3D,oBAAIC,WAAW,CAAC,GAAGrB,QAAQP,OAAZ,EAAqBiB,SAArB,EAAgC,CAAhC,CAAf;AACAG,mBAAGO,GAAH,EAAQC,QAAR;AACH,aAHc,CAAf;AAIH,SALD,EAKG,UAAUD,GAAV,EAAeE,OAAf,EAAwB;AACvBT,eAAGK,KAAH,CAASN,IAAT,EAAe,CAACQ,GAAD,EAAMD,MAAN,CAAaG,OAAb,CAAf;AACH,SAPD;AAQH,KAnBD;AAoBH;AACDC,OAAOhC,OAAP,GAAiBA,QAAQ,SAAR,CAAjB","file":"seq.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = seq;\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _slice = require('./internal/slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nvar _reduce = require('./reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _arrayMap = require('lodash/_arrayMap');\n\nvar _arrayMap2 = _interopRequireDefault(_arrayMap);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Version of the compose function that is more natural to read. Each function\n * consumes the return value of the previous function. It is the equivalent of\n * [compose]{@link module:ControlFlow.compose} with the arguments reversed.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name seq\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.compose]{@link module:ControlFlow.compose}\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} a function that composes the `functions` in order\n * @example\n *\n * // Requires lodash (or underscore), express3 and dresende's orm2.\n * // Part of an app, that fetches cats of the logged user.\n * // This example uses `seq` function to avoid overnesting and error\n * // handling clutter.\n * app.get('/cats', function(request, response) {\n *     var User = request.models.User;\n *     async.seq(\n *         _.bind(User.get, User),  // 'User.get' has signature (id, callback(err, data))\n *         function(user, fn) {\n *             user.getCats(fn);      // 'getCats' has signature (callback(err, data))\n *         }\n *     )(req.session.user_id, function (err, cats) {\n *         if (err) {\n *             console.error(err);\n *             response.json({ status: 'error', message: err.message });\n *         } else {\n *             response.json({ status: 'ok', message: 'Cats found', data: cats });\n *         }\n *     });\n * });\n */\nfunction seq() /*...functions*/{\n    var _functions = (0, _arrayMap2.default)(arguments, _wrapAsync2.default);\n    return function () /*...args*/{\n        var args = (0, _slice2.default)(arguments);\n        var that = this;\n\n        var cb = args[args.length - 1];\n        if (typeof cb == 'function') {\n            args.pop();\n        } else {\n            cb = _noop2.default;\n        }\n\n        (0, _reduce2.default)(_functions, args, function (newargs, fn, cb) {\n            fn.apply(that, newargs.concat(function (err /*, ...nextargs*/) {\n                var nextargs = (0, _slice2.default)(arguments, 1);\n                cb(err, nextargs);\n            }));\n        }, function (err, results) {\n            cb.apply(that, [err].concat(results));\n        });\n    };\n}\nmodule.exports = exports['default'];"]}