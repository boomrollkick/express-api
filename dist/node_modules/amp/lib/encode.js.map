{"version":3,"sources":["../../../../src/node_modules/amp/lib/encode.js"],"names":["version","module","exports","args","argc","length","len","off","i","buf","Buffer","arg","writeUInt32BE","copy"],"mappings":";;AACA;;;;AAIA,IAAIA,UAAU,CAAd;;AAEA;;;;;;;;AAQAC,OAAOC,OAAP,GAAiB,UAASC,IAAT,EAAc;AAC7B,MAAIC,OAAOD,KAAKE,MAAhB;AACA,MAAIC,MAAM,CAAV;AACA,MAAIC,MAAM,CAAV;;AAEA;AACA,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,IAApB,EAA0BI,GAA1B,EAA+B;AAC7BF,WAAO,IAAIH,KAAKK,CAAL,EAAQH,MAAnB;AACD;;AAED;AACA,MAAII,MAAM,IAAIC,MAAJ,CAAWJ,GAAX,CAAV;;AAEA;AACAG,MAAIF,KAAJ,IAAaP,WAAW,CAAX,GAAeI,IAA5B;;AAEA;AACA,OAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIJ,IAApB,EAA0BI,GAA1B,EAA+B;AAC7B,QAAIG,MAAMR,KAAKK,CAAL,CAAV;;AAEAC,QAAIG,aAAJ,CAAkBD,IAAIN,MAAtB,EAA8BE,GAA9B;AACAA,WAAO,CAAP;;AAEAI,QAAIE,IAAJ,CAASJ,GAAT,EAAcF,GAAd;AACAA,WAAOI,IAAIN,MAAX;AACD;;AAED,SAAOI,GAAP;AACD,CA5BD","file":"encode.js","sourcesContent":["\n/**\n * Protocol version.\n */\n\nvar version = 1;\n\n/**\n * Encode `msg` and `args`.\n *\n * @param {Array} args\n * @return {Buffer}\n * @api public\n */\n\nmodule.exports = function(args){\n  var argc = args.length;\n  var len = 1;\n  var off = 0;\n\n  // data length\n  for (var i = 0; i < argc; i++) {\n    len += 4 + args[i].length;\n  }\n\n  // buffer\n  var buf = new Buffer(len);\n\n  // pack meta\n  buf[off++] = version << 4 | argc;\n\n  // pack args\n  for (var i = 0; i < argc; i++) {\n    var arg = args[i];\n\n    buf.writeUInt32BE(arg.length, off);\n    off += 4;\n\n    arg.copy(buf, off);\n    off += arg.length;\n  }\n\n  return buf;\n};"]}