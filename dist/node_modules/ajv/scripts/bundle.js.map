{"version":3,"sources":["../../../../src/node_modules/ajv/scripts/bundle.js"],"names":["fs","require","path","browserify","uglify","pkg","process","argv","standalone","compress","packageDir","join","__dirname","json","distDir","existsSync","mkdirSync","bOpts","main","expose","name","bundle","err","buf","console","error","exit","outputFile","outputBundle","writeFileSync","uglifyOpts","warnings","output","preamble","version","description","compressOpts","split","i","length","pair","outSourceMap","result","minify","code","map","unlinkSync"],"mappings":"AAAA;;AAEA,IAAIA,KAAKC,QAAQ,IAAR,CAAT;AAAA,IACIC,OAAOD,QAAQ,MAAR,CADX;AAAA,IAEIE,aAAaF,QAAQ,YAAR,CAFjB;AAAA,IAGIG,SAASH,QAAQ,WAAR,CAHb;;AAKA,IAAII,MAAMC,QAAQC,IAAR,CAAa,CAAb,CAAV;AAAA,IACIC,aAAaF,QAAQC,IAAR,CAAa,CAAb,CADjB;AAAA,IAEIE,WAAWH,QAAQC,IAAR,CAAa,CAAb,CAFf;;AAIA,IAAIG,aAAaR,KAAKS,IAAL,CAAUC,SAAV,EAAqB,IAArB,CAAjB;AACA,IAAIP,OAAO,GAAX,EAAgBK,aAAaR,KAAKS,IAAL,CAAUD,UAAV,EAAsB,cAAtB,EAAsCL,GAAtC,CAAb;;AAEhB,IAAIQ,OAAOZ,QAAQC,KAAKS,IAAL,CAAUD,UAAV,EAAsB,cAAtB,CAAR,CAAX;;AAEA,IAAII,UAAUZ,KAAKS,IAAL,CAAUC,SAAV,EAAqB,IAArB,EAA2B,MAA3B,CAAd;AACA,IAAI,CAACZ,GAAGe,UAAH,CAAcD,OAAd,CAAL,EAA6Bd,GAAGgB,SAAH,CAAaF,OAAb;;AAE7B,IAAIG,QAAQ,EAAZ;AACA,IAAIT,UAAJ,EAAgBS,MAAMT,UAAN,GAAmBA,UAAnB;;AAEhBL,WAAWc,KAAX,EACChB,OADD,CACSC,KAAKS,IAAL,CAAUD,UAAV,EAAsBG,KAAKK,IAA3B,CADT,EAC2C,EAACC,QAAQN,KAAKO,IAAd,EAD3C,EAECC,MAFD,CAEQ,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC1B,MAAID,GAAJ,EAAS;AACPE,YAAQC,KAAR,CAAc,mBAAd,EAAmCH,GAAnC;AACAhB,YAAQoB,IAAR,CAAa,CAAb;AACD;;AAED,MAAIC,aAAazB,KAAKS,IAAL,CAAUG,OAAV,EAAmBD,KAAKO,IAAxB,CAAjB;AACA,MAAIQ,eAAeD,aAAa,YAAhC;AACA3B,KAAG6B,aAAH,CAAiBD,YAAjB,EAA+BL,GAA/B;AACA,MAAIO,aAAa;AACfC,cAAU,IADK;AAEftB,cAAU,EAFK;AAGfuB,YAAQ;AACNC,gBAAU,QAAQpB,KAAKO,IAAb,GAAoB,GAApB,GAA0BP,KAAKqB,OAA/B,GAAyC,IAAzC,GAAgDrB,KAAKsB,WAArD,GAAmE;AADvE;AAHO,GAAjB;AAOA,MAAI1B,QAAJ,EAAc;AACZ,QAAI2B,eAAe3B,SAAS4B,KAAT,CAAe,GAAf,CAAnB;AACA,SAAK,IAAIC,IAAE,CAAX,EAAcA,IAAEF,aAAaG,MAA7B,EAAqC,EAAED,CAAvC,EAA0C;AACxC,UAAIE,OAAOJ,aAAaE,CAAb,EAAgBD,KAAhB,CAAsB,GAAtB,CAAX;AACAP,iBAAWrB,QAAX,CAAoB+B,KAAK,CAAL,CAApB,IAA+BA,KAAKD,MAAL,GAAc,CAAd,IAAmBC,KAAK,CAAL,KAAW,OAA7D;AACD;AACF;AACD,MAAIhC,UAAJ,EAAgBsB,WAAWW,YAAX,GAA0B5B,KAAKO,IAAL,GAAY,aAAtC;;AAEhB,MAAIsB,SAAStC,OAAOuC,MAAP,CAAcf,YAAd,EAA4BE,UAA5B,CAAb;AACA9B,KAAG6B,aAAH,CAAiBF,aAAa,SAA9B,EAAyCe,OAAOE,IAAhD;AACA,MAAIF,OAAOG,GAAX,EAAgB7C,GAAG6B,aAAH,CAAiBF,aAAa,aAA9B,EAA6Ce,OAAOG,GAApD;AAChB,MAAI,CAACrC,UAAL,EAAiBR,GAAG8C,UAAH,CAAclB,YAAd;AAClB,CA/BD","file":"bundle.js","sourcesContent":["'use strict';\n\nvar fs = require('fs')\n  , path = require('path')\n  , browserify = require('browserify')\n  , uglify = require('uglify-js');\n\nvar pkg = process.argv[2]\n  , standalone = process.argv[3]\n  , compress = process.argv[4];\n\nvar packageDir = path.join(__dirname, '..');\nif (pkg != '.') packageDir = path.join(packageDir, 'node_modules', pkg);\n\nvar json = require(path.join(packageDir, 'package.json'));\n\nvar distDir = path.join(__dirname, '..', 'dist');\nif (!fs.existsSync(distDir)) fs.mkdirSync(distDir);\n\nvar bOpts = {};\nif (standalone) bOpts.standalone = standalone;\n\nbrowserify(bOpts)\n.require(path.join(packageDir, json.main), {expose: json.name})\n.bundle(function (err, buf) {\n  if (err) {\n    console.error('browserify error:', err);\n    process.exit(1);\n  }\n\n  var outputFile = path.join(distDir, json.name);\n  var outputBundle = outputFile + '.bundle.js';\n  fs.writeFileSync(outputBundle, buf);\n  var uglifyOpts = {\n    warnings: true,\n    compress: {},\n    output: {\n      preamble: '/* ' + json.name + ' ' + json.version + ': ' + json.description + ' */'\n    }\n  };\n  if (compress) {\n    var compressOpts = compress.split(',');\n    for (var i=0; i<compressOpts.length; ++i) {\n      var pair = compressOpts[i].split('=');\n      uglifyOpts.compress[pair[0]] = pair.length < 1 || pair[1] != 'false';\n    }\n  }\n  if (standalone) uglifyOpts.outSourceMap = json.name + '.min.js.map';\n\n  var result = uglify.minify(outputBundle, uglifyOpts);\n  fs.writeFileSync(outputFile + '.min.js', result.code);\n  if (result.map) fs.writeFileSync(outputFile + '.min.js.map', result.map);\n  if (!standalone) fs.unlinkSync(outputBundle);\n});\n"]}