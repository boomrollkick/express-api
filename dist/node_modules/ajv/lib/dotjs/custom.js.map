{"version":3,"sources":["../../../../../src/node_modules/ajv/lib/dotjs/custom.js"],"names":["module","exports","generate_custom","it","$keyword","out","$lvl","level","$dataLvl","dataLevel","$schema","schema","$schemaPath","schemaPath","util","getProperty","$errSchemaPath","errSchemaPath","$breakOnError","opts","allErrors","$errorKeyword","$data","$valid","$errs","$isData","v5","$schemaValue","getData","dataPathArr","$rule","$definition","$rDef","definition","$compile","$inline","$macro","$ruleValidate","$validateCode","$validateSchema","validateSchema","useCustomRule","code","compile","inline","macro","$ruleErrs","$i","$ruleErr","$asyncKeyword","async","Error","statements","validate","$it","copy","$nextValid","$wasComposite","compositeRule","$code","replace","$$outStack","push","passContext","errorPath","$parentData","$parentDataProperty","def_callRuleValidate","pop","errors","yieldAwait","modifying","valid","undefined","keyword","createErrors","toQuotedString","messages","verbose","__err","def_customError"],"mappings":"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","file":"custom.js","sourcesContent":["'use strict';\nmodule.exports = function generate_custom(it, $keyword) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $isData = it.opts.v5 && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $rule = this,\n    $definition = 'definition' + $lvl,\n    $rDef = $rule.definition;\n  var $compile, $inline, $macro, $ruleValidate, $validateCode;\n  if ($isData && $rDef.$data) {\n    $validateCode = 'keywordValidate' + $lvl;\n    var $validateSchema = $rDef.validateSchema;\n    out += ' var ' + ($definition) + ' = RULES.custom[\\'' + ($keyword) + '\\'].definition; var ' + ($validateCode) + ' = ' + ($definition) + '.validate;';\n  } else {\n    $ruleValidate = it.useCustomRule($rule, $schema, it.schema, it);\n    $schemaValue = 'validate.schema' + $schemaPath;\n    $validateCode = $ruleValidate.code;\n    $compile = $rDef.compile;\n    $inline = $rDef.inline;\n    $macro = $rDef.macro;\n  }\n  var $ruleErrs = $validateCode + '.errors',\n    $i = 'i' + $lvl,\n    $ruleErr = 'ruleErr' + $lvl,\n    $asyncKeyword = $rDef.async;\n  if ($asyncKeyword && !it.async) throw new Error('async keyword in sync schema');\n  if (!($inline || $macro)) {\n    out += '' + ($ruleErrs) + ' = null;';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($validateSchema) {\n    out += ' ' + ($valid) + ' = ' + ($definition) + '.validateSchema(' + ($schemaValue) + '); if (' + ($valid) + ') {';\n  }\n  if ($inline) {\n    if ($rDef.statements) {\n      out += ' ' + ($ruleValidate.validate) + ' ';\n    } else {\n      out += ' ' + ($valid) + ' = ' + ($ruleValidate.validate) + '; ';\n    }\n  } else if ($macro) {\n    var $it = it.util.copy(it);\n    $it.level++;\n    var $nextValid = 'valid' + $it.level;\n    $it.schema = $ruleValidate.validate;\n    $it.schemaPath = '';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it).replace(/validate\\.schema/g, $validateCode);\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($code);\n  } else {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    out += '  ' + ($validateCode) + '.call( ';\n    if (it.opts.passContext) {\n      out += 'this';\n    } else {\n      out += 'self';\n    }\n    if ($compile || $rDef.schema === false) {\n      out += ' , ' + ($data) + ' ';\n    } else {\n      out += ' , ' + ($schemaValue) + ' , ' + ($data) + ' , validate.schema' + (it.schemaPath) + ' ';\n    }\n    out += ' , (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ' , rootData )  ';\n    var def_callRuleValidate = out;\n    out = $$outStack.pop();\n    if ($rDef.errors === false) {\n      out += ' ' + ($valid) + ' = ';\n      if ($asyncKeyword) {\n        out += '' + (it.yieldAwait);\n      }\n      out += '' + (def_callRuleValidate) + '; ';\n    } else {\n      if ($asyncKeyword) {\n        $ruleErrs = 'customErrors' + $lvl;\n        out += ' var ' + ($ruleErrs) + ' = null; try { ' + ($valid) + ' = ' + (it.yieldAwait) + (def_callRuleValidate) + '; } catch (e) { ' + ($valid) + ' = false; if (e instanceof ValidationError) ' + ($ruleErrs) + ' = e.errors; else throw e; } ';\n      } else {\n        out += ' ' + ($ruleErrs) + ' = null; ' + ($valid) + ' = ' + (def_callRuleValidate) + '; ';\n      }\n    }\n  }\n  if ($rDef.modifying) {\n    out += ' ' + ($data) + ' = ' + ($parentData) + '[' + ($parentDataProperty) + '];';\n  }\n  if ($validateSchema) {\n    out += ' }';\n  }\n  if ($rDef.valid) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  } else {\n    out += ' if ( ';\n    if ($rDef.valid === undefined) {\n      out += ' !';\n      if ($macro) {\n        out += '' + ($nextValid);\n      } else {\n        out += '' + ($valid);\n      }\n    } else {\n      out += ' ' + (!$rDef.valid) + ' ';\n    }\n    out += ') { ';\n    $errorKeyword = $rule.keyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    var def_customError = out;\n    out = $$outStack.pop();\n    if ($inline) {\n      if ($rDef.errors) {\n        if ($rDef.errors != 'full') {\n          out += '  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } ';\n        }\n      } else {\n        if ($rDef.errors === false) {\n          out += ' ' + (def_customError) + ' ';\n        } else {\n          out += ' if (' + ($errs) + ' == errors) { ' + (def_customError) + ' } else {  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } } ';\n        }\n      }\n    } else if ($macro) {\n      out += '   var err =   '; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError(vErrors); ';\n        } else {\n          out += ' validate.errors = vErrors; return false; ';\n        }\n      }\n    } else {\n      if ($rDef.errors === false) {\n        out += ' ' + (def_customError) + ' ';\n      } else {\n        out += ' if (Array.isArray(' + ($ruleErrs) + ')) { if (vErrors === null) vErrors = ' + ($ruleErrs) + '; else vErrors = vErrors.concat(' + ($ruleErrs) + '); errors = vErrors.length;  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + ';  ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\";  ';\n        if (it.opts.verbose) {\n          out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n        }\n        out += ' } } else { ' + (def_customError) + ' } ';\n      }\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  }\n  return out;\n}\n"]}