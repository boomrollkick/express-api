{"version":3,"sources":["../../../src/node_modules/async-listener/es6-wrapped-promise.js"],"names":["module","exports","Promise","ensureAslWrapper","executor","context","args","wrappedExecutor","promise","apply","err","resolve","reject","wrappedResolve","wrappedReject","val"],"mappings":"AAAA;;;;;;;;AAEAA,OAAOC,OAAP,GAAiB,UAACC,OAAD,EAAUC,gBAAV,EAA+B;AAC9C;AACA;AACA;AAAA;;AACE,4BAAYC,QAAZ,EAAsB;AAAA;;AAAA;;AACpB,UAAIC,OAAJ,EAAaC,IAAb;;AADoB,kIAEdC,eAFc;;AAGpB,UAAIC,eAAJ;;AAEA,UAAI;AACFJ,iBAASK,KAAT,CAAeJ,OAAf,EAAwBC,IAAxB;AACD,OAFD,CAEE,OAAOI,GAAP,EAAY;AACZJ,aAAK,CAAL,EAAQI,GAAR;AACD;;AAED,oBAAOF,OAAP;AACA,eAASD,eAAT,CAAyBI,OAAzB,EAAkCC,MAAlC,EAA0C;AACxCP,kBAAU,IAAV;AACAC,eAAO,CAACO,cAAD,EAAiBC,aAAjB,CAAP;;AAEA;AACA;AACA,iBAASD,cAAT,CAAwBE,GAAxB,EAA6B;AAC3BZ,2BAAiBK,OAAjB,EAA0B,KAA1B;AACA,iBAAOG,QAAQI,GAAR,CAAP;AACD;;AAED,iBAASD,aAAT,CAAuBC,GAAvB,EAA4B;AAC1BZ,2BAAiBK,OAAjB,EAA0B,KAA1B;AACA,iBAAOI,OAAOG,GAAP,CAAP;AACD;AACF;AA3BmB;AA4BrB;;AA7BH;AAAA,IAAoCb,OAApC;AA+BD,CAlCD","file":"es6-wrapped-promise.js","sourcesContent":["'use strict';\n\nmodule.exports = (Promise, ensureAslWrapper) => {\n  // Updates to this class should also be applied to the the ES3 version\n  // in index.js.\n  return class WrappedPromise extends Promise {\n    constructor(executor) {\n      var context, args;\n      super(wrappedExecutor);\n      var promise = this;\n\n      try {\n        executor.apply(context, args);\n      } catch (err) {\n        args[1](err);\n      }\n\n      return promise;\n      function wrappedExecutor(resolve, reject) {\n        context = this;\n        args = [wrappedResolve, wrappedReject];\n\n        // These wrappers create a function that can be passed a function and an argument to\n        // call as a continuation from the resolve or reject.\n        function wrappedResolve(val) {\n          ensureAslWrapper(promise, false);\n          return resolve(val);\n        }\n\n        function wrappedReject(val) {\n          ensureAslWrapper(promise, false);\n          return reject(val);\n        }\n      }\n    }\n  }\n};\n"]}