{"version":3,"sources":["../../../../src/node_modules/ajv-keywords/keywords/_formatLimit.js"],"names":["TIME","DATE_TIME_SEPARATOR","COMPARE_FORMATS","date","compareDate","time","compareTime","compareDateTime","module","exports","minMax","keyword","defFunc","ajv","RULES","keywords","console","warn","definition","type","inline","require","statements","errors","metaSchema","anyOf","required","properties","$data","format","additionalProperties","addKeyword","extendFormats","formats","_formats","name","validate","compare","d1","d2","t1","t2","match","dt1","dt2","split","res","undefined"],"mappings":"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","file":"_formatLimit.js","sourcesContent":["'use strict';\n\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d:\\d\\d)?$/i;\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\n\nvar COMPARE_FORMATS = {\n  date: compareDate,\n  time: compareTime,\n  'date-time': compareDateTime\n};\n\nmodule.exports = function (minMax) {\n  var keyword = 'format' + minMax;\n  return function defFunc(ajv) {\n    if (ajv.RULES.keywords[keyword])\n      return console.warn('Keyword', keyword, 'is already defined');\n\n    defFunc.definition = {\n      type: 'string',\n      inline: require('./dotjs/_formatLimit'),\n      statements: true,\n      errors: 'full',\n      metaSchema: {\n        anyOf: [\n          { type: 'string' },\n          {\n            type: 'object',\n            required: [ '$data' ],\n            properties: {\n              $data: {\n                type: 'string',\n                anyOf: [\n                  { format: 'relative-json-pointer' },\n                  { format: 'json-pointer' }\n                ]\n              }\n            },\n            additionalProperties: false\n          }\n        ]\n      }\n    };\n\n    ajv.addKeyword(keyword, defFunc.definition);\n    ajv.addKeyword('formatExclusive' + minMax);\n    extendFormats(ajv);\n    return ajv;\n  };\n};\n\n\nfunction extendFormats(ajv) {\n  var formats = ajv._formats;\n  for (var name in COMPARE_FORMATS) {\n    var format = formats[name];\n    if (typeof format != 'object')\n      format = formats[name] = { validate: format };\n    if (!format.compare)\n      format.compare = COMPARE_FORMATS[name];\n  }\n}\n\n\nfunction compareDate(d1, d2) {\n  if (!(d1 && d2)) return;\n  if (d1 > d2) return 1;\n  if (d1 < d2) return -1;\n  if (d1 === d2) return 0;\n}\n\n\nfunction compareTime(t1, t2) {\n  if (!(t1 && t2)) return;\n  t1 = t1.match(TIME);\n  t2 = t2.match(TIME);\n  if (!(t1 && t2)) return;\n  t1 = t1[1] + t1[2] + t1[3] + (t1[4]||'');\n  t2 = t2[1] + t2[2] + t2[3] + (t2[4]||'');\n  if (t1 > t2) return 1;\n  if (t1 < t2) return -1;\n  if (t1 === t2) return 0;\n}\n\n\nfunction compareDateTime(dt1, dt2) {\n  if (!(dt1 && dt2)) return;\n  dt1 = dt1.split(DATE_TIME_SEPARATOR);\n  dt2 = dt2.split(DATE_TIME_SEPARATOR);\n  var res = compareDate(dt1[0], dt2[0]);\n  if (res === undefined) return;\n  return res || compareTime(dt1[1], dt2[1]);\n}\n"]}