{"version":3,"sources":["../../../../../src/node_modules/@pm2/agent-node/example/test.js"],"names":["process","env","DEBUG","Agent","require","proc","axm_actions","action_name","action_type","agent","publicKey","secretKey","appName","init","_","start","setTimeout","push","listener","console","log","payload","transport","on","removeListener","send","key"],"mappings":"AAAA;;;;AAEAA,QAAQC,GAAR,CAAYC,KAAZ,GAAoB,GAApB;;AAEA,IAAMC,QAAQC,QAAQ,IAAR,CAAd;AACA,IAAMC,OAAO;AACXC,eAAa,CAAC,EAACC,aAAa,MAAd,EAAsBC,aAAa,KAAnC,EAAD;AADF,CAAb;AAGA,IAAMC,QAAQ,IAAIN,KAAJ,CAAU,EAAE;AACxBO,aAAW,iBADW;AAEtBC,aAAW,iBAFW;AAGtBC,WAAS;AAHa,CAAV,EAIXP,IAJW,CAAd;;AAMA,IAAMQ;AAAA,qEAAO,iBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACLL,MAAMM,KAAN,EADK;;AAAA;AAEX;AACAC,uBAAW;AAAA,qBAAKX,KAAKC,WAAL,CAAiBW,IAAjB,CAAsB,EAACV,aAAa,KAAd,EAAqBC,aAAa,KAAlC,EAAtB,CAAL;AAAA,aAAX,EAAiF,KAAjF;AACA;;AACIU,oBALO,GAKI,SAAXA,QAAW;AAAA,qBAAWC,QAAQC,GAAR,CAAYC,OAAZ,CAAX;AAAA,aALJ;;AAMXZ,kBAAMa,SAAN,CAAgBC,EAAhB,CAAmB,oBAAnB,EAAyCL,QAAzC;AACA;AACAF,uBAAW;AAAA,qBAAKP,MAAMa,SAAN,CAAgBE,cAAhB,CAA+B,oBAA/B,EAAqDN,QAArD,CAAL;AAAA,aAAX,EAAgF,KAAhF;AACA;AACAT,kBAAMa,SAAN,CAAgBG,IAAhB,CAAqB,WAArB,EAAkC,EAACC,KAAK,OAAN,EAAlC;AACAP,oBAAQC,GAAR,CAAY,OAAZ;;AAXW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;;AAAA;AAAA;AAAA;AAAA,GAAN;AAaAP","file":"test.js","sourcesContent":["'use strict'\n\nprocess.env.DEBUG = '*'\n\nconst Agent = require('..')\nconst proc = {\n  axm_actions: [{action_name: 'test', action_type: 'pm2'}]\n}\nconst agent = new Agent({ // eslint-disable-line\n  publicKey: 'zftc3kf0ehy12bo',\n  secretKey: 'ptcsyi1n6chf9qs',\n  appName: 'agent-node'\n}, proc)\n\nconst init = async _ => {\n  await agent.start()\n  // Add some custom actions\n  setTimeout(_ => proc.axm_actions.push({action_name: 'lol', action_type: 'pm2'}), 10000)\n  // Listen\n  let listener = payload => console.log(payload)\n  agent.transport.on('trigger:pm2:action', listener)\n  // Stop listening\n  setTimeout(_ => agent.transport.removeListener('trigger:pm2:action', listener), 10000)\n  // Send packet\n  agent.transport.send('exception', {key: 'value'})\n  console.log('done.')\n}\ninit()\n"]}