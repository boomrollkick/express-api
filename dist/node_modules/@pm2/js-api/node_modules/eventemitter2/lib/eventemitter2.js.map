{"version":3,"sources":["../../../../../../../src/node_modules/@pm2/js-api/node_modules/eventemitter2/lib/eventemitter2.js"],"names":["undefined","isArray","Array","_isArray","obj","Object","prototype","toString","call","defaultMaxListeners","init","_events","_conf","configure","conf","delimiter","_maxListeners","maxListeners","wildcard","newListener","verboseMemoryLeak","listenerTree","logPossibleMemoryLeak","count","eventName","errorMsg","process","emitWarning","e","Error","name","emitter","console","error","trace","EventEmitter","EventEmitter2","searchListenerTree","handlers","type","tree","i","listeners","leaf","len","branch","xTree","xxTree","isolatedBranch","endReached","typeLength","length","currentType","nextType","_listeners","push","hasOwnProperty","concat","growListenerTree","listener","split","slice","shift","warned","setMaxListeners","n","event","once","fn","_once","prependOnceListener","prepend","_many","many","ttl","prependMany","self","off","apply","arguments","_origin","_on","emit","al","args","l","j","handler","_all","ns","emitAsync","Promise","resolve","promises","reject","all","on","prependListener","onAny","_onAny","prependAny","addListener","unshift","leafs","iLeaf","position","splice","recursivelyGarbageCollect","root","keys","key","Function","offAny","fns","removeListener","removeAllListeners","eventNames","listenerCount","listenersAny","define","amd","exports","module","window"],"mappings":";;;;AAAA;;;;;;;AAOA,CAAC,CAAC,UAASA,SAAT,EAAoB;;AAEpB,MAAIC,UAAUC,MAAMD,OAAN,GAAgBC,MAAMD,OAAtB,GAAgC,SAASE,QAAT,CAAkBC,GAAlB,EAAuB;AACnE,WAAOC,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,GAA/B,MAAwC,gBAA/C;AACD,GAFD;AAGA,MAAIK,sBAAsB,EAA1B;;AAEA,WAASC,IAAT,GAAgB;AACd,SAAKC,OAAL,GAAe,EAAf;AACA,QAAI,KAAKC,KAAT,EAAgB;AACdC,gBAAUL,IAAV,CAAe,IAAf,EAAqB,KAAKI,KAA1B;AACD;AACF;;AAED,WAASC,SAAT,CAAmBC,IAAnB,EAAyB;AACvB,QAAIA,IAAJ,EAAU;AACR,WAAKF,KAAL,GAAaE,IAAb;;AAEAA,WAAKC,SAAL,KAAmB,KAAKA,SAAL,GAAiBD,KAAKC,SAAzC;AACA,WAAKC,aAAL,GAAqBF,KAAKG,YAAL,KAAsBjB,SAAtB,GAAkCc,KAAKG,YAAvC,GAAsDR,mBAA3E;;AAEAK,WAAKI,QAAL,KAAkB,KAAKA,QAAL,GAAgBJ,KAAKI,QAAvC;AACAJ,WAAKK,WAAL,KAAqB,KAAKA,WAAL,GAAmBL,KAAKK,WAA7C;AACAL,WAAKM,iBAAL,KAA2B,KAAKA,iBAAL,GAAyBN,KAAKM,iBAAzD;;AAEA,UAAI,KAAKF,QAAT,EAAmB;AACjB,aAAKG,YAAL,GAAoB,EAApB;AACD;AACF,KAbD,MAaO;AACL,WAAKL,aAAL,GAAqBP,mBAArB;AACD;AACF;;AAED,WAASa,qBAAT,CAA+BC,KAA/B,EAAsCC,SAAtC,EAAiD;AAC/C,QAAIC,WAAW,kDACX,iBADW,GACSF,KADT,GACiB,oBADjB,GAEX,kDAFJ;;AAIA,QAAG,KAAKH,iBAAR,EAA0B;AACxBK,kBAAY,kBAAkBD,SAAlB,GAA8B,GAA1C;AACD;;AAED,QAAG,OAAOE,OAAP,KAAmB,WAAnB,IAAkCA,QAAQC,WAA7C,EAAyD;AACvD,UAAIC,IAAI,IAAIC,KAAJ,CAAUJ,QAAV,CAAR;AACAG,QAAEE,IAAF,GAAS,6BAAT;AACAF,QAAEG,OAAF,GAAY,IAAZ;AACAH,QAAEL,KAAF,GAAUA,KAAV;AACAG,cAAQC,WAAR,CAAoBC,CAApB;AACD,KAND,MAMO;AACLI,cAAQC,KAAR,CAAcR,QAAd;;AAEA,UAAIO,QAAQE,KAAZ,EAAkB;AAChBF,gBAAQE,KAAR;AACD;AACF;AACF;;AAED,WAASC,YAAT,CAAsBrB,IAAtB,EAA4B;AAC1B,SAAKH,OAAL,GAAe,EAAf;AACA,SAAKQ,WAAL,GAAmB,KAAnB;AACA,SAAKC,iBAAL,GAAyB,KAAzB;AACAP,cAAUL,IAAV,CAAe,IAAf,EAAqBM,IAArB;AACD;AACDqB,eAAaC,aAAb,GAA6BD,YAA7B,CA/DoB,CA+DuB;;AAE3C;AACA;AACA;AACA;AACA;AACA,WAASE,kBAAT,CAA4BC,QAA5B,EAAsCC,IAAtC,EAA4CC,IAA5C,EAAkDC,CAAlD,EAAqD;AACnD,QAAI,CAACD,IAAL,EAAW;AACT,aAAO,EAAP;AACD;AACD,QAAIE,YAAU,EAAd;AAAA,QAAkBC,IAAlB;AAAA,QAAwBC,GAAxB;AAAA,QAA6BC,MAA7B;AAAA,QAAqCC,KAArC;AAAA,QAA4CC,MAA5C;AAAA,QAAoDC,cAApD;AAAA,QAAoEC,UAApE;AAAA,QACIC,aAAaX,KAAKY,MADtB;AAAA,QAC8BC,cAAcb,KAAKE,CAAL,CAD5C;AAAA,QACqDY,WAAWd,KAAKE,IAAE,CAAP,CADhE;AAEA,QAAIA,MAAMS,UAAN,IAAoBV,KAAKc,UAA7B,EAAyC;AACvC;AACA;AACA;AACA;AACA,UAAI,OAAOd,KAAKc,UAAZ,KAA2B,UAA/B,EAA2C;AACzChB,oBAAYA,SAASiB,IAAT,CAAcf,KAAKc,UAAnB,CAAZ;AACA,eAAO,CAACd,IAAD,CAAP;AACD,OAHD,MAGO;AACL,aAAKG,OAAO,CAAP,EAAUC,MAAMJ,KAAKc,UAAL,CAAgBH,MAArC,EAA6CR,OAAOC,GAApD,EAAyDD,MAAzD,EAAiE;AAC/DL,sBAAYA,SAASiB,IAAT,CAAcf,KAAKc,UAAL,CAAgBX,IAAhB,CAAd,CAAZ;AACD;AACD,eAAO,CAACH,IAAD,CAAP;AACD;AACF;;AAED,QAAKY,gBAAgB,GAAhB,IAAuBA,gBAAgB,IAAxC,IAAiDZ,KAAKY,WAAL,CAArD,EAAwE;AACtE;AACA;AACA;AACA;AACA,UAAIA,gBAAgB,GAApB,EAAyB;AACvB,aAAKP,MAAL,IAAeL,IAAf,EAAqB;AACnB,cAAIK,WAAW,YAAX,IAA2BL,KAAKgB,cAAL,CAAoBX,MAApB,CAA/B,EAA4D;AAC1DH,wBAAYA,UAAUe,MAAV,CAAiBpB,mBAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCC,KAAKK,MAAL,CAAnC,EAAiDJ,IAAE,CAAnD,CAAjB,CAAZ;AACD;AACF;AACD,eAAOC,SAAP;AACD,OAPD,MAOO,IAAGU,gBAAgB,IAAnB,EAAyB;AAC9BH,qBAAcR,IAAE,CAAF,KAAQS,UAAR,IAAuBT,IAAE,CAAF,KAAQS,UAAR,IAAsBG,aAAa,GAAxE;AACA,YAAGJ,cAAcT,KAAKc,UAAtB,EAAkC;AAChC;AACAZ,sBAAYA,UAAUe,MAAV,CAAiBpB,mBAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCC,IAAnC,EAAyCU,UAAzC,CAAjB,CAAZ;AACD;;AAED,aAAKL,MAAL,IAAeL,IAAf,EAAqB;AACnB,cAAIK,WAAW,YAAX,IAA2BL,KAAKgB,cAAL,CAAoBX,MAApB,CAA/B,EAA4D;AAC1D,gBAAGA,WAAW,GAAX,IAAkBA,WAAW,IAAhC,EAAsC;AACpC,kBAAGL,KAAKK,MAAL,EAAaS,UAAb,IAA2B,CAACL,UAA/B,EAA2C;AACzCP,4BAAYA,UAAUe,MAAV,CAAiBpB,mBAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCC,KAAKK,MAAL,CAAnC,EAAiDK,UAAjD,CAAjB,CAAZ;AACD;AACDR,0BAAYA,UAAUe,MAAV,CAAiBpB,mBAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCC,KAAKK,MAAL,CAAnC,EAAiDJ,CAAjD,CAAjB,CAAZ;AACD,aALD,MAKO,IAAGI,WAAWQ,QAAd,EAAwB;AAC7BX,0BAAYA,UAAUe,MAAV,CAAiBpB,mBAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCC,KAAKK,MAAL,CAAnC,EAAiDJ,IAAE,CAAnD,CAAjB,CAAZ;AACD,aAFM,MAEA;AACL;AACAC,0BAAYA,UAAUe,MAAV,CAAiBpB,mBAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCC,KAAKK,MAAL,CAAnC,EAAiDJ,CAAjD,CAAjB,CAAZ;AACD;AACF;AACF;AACD,eAAOC,SAAP;AACD;;AAEDA,kBAAYA,UAAUe,MAAV,CAAiBpB,mBAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCC,KAAKY,WAAL,CAAnC,EAAsDX,IAAE,CAAxD,CAAjB,CAAZ;AACD;;AAEDK,YAAQN,KAAK,GAAL,CAAR;AACA,QAAIM,KAAJ,EAAW;AACT;AACA;AACA;AACA;AACAT,yBAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCO,KAAnC,EAA0CL,IAAE,CAA5C;AACD;;AAEDM,aAASP,KAAK,IAAL,CAAT;AACA,QAAGO,MAAH,EAAW;AACT,UAAGN,IAAIS,UAAP,EAAmB;AACjB,YAAGH,OAAOO,UAAV,EAAsB;AACpB;AACAjB,6BAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCQ,MAAnC,EAA2CG,UAA3C;AACD;;AAED;AACA,aAAIL,MAAJ,IAAcE,MAAd,EAAsB;AACpB,cAAGF,WAAW,YAAX,IAA2BE,OAAOS,cAAP,CAAsBX,MAAtB,CAA9B,EAA6D;AAC3D,gBAAGA,WAAWQ,QAAd,EAAwB;AACtB;AACAhB,iCAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCQ,OAAOF,MAAP,CAAnC,EAAmDJ,IAAE,CAArD;AACD,aAHD,MAGO,IAAGI,WAAWO,WAAd,EAA2B;AAChC;AACAf,iCAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCQ,OAAOF,MAAP,CAAnC,EAAmDJ,IAAE,CAArD;AACD,aAHM,MAGA;AACLO,+BAAiB,EAAjB;AACAA,6BAAeH,MAAf,IAAyBE,OAAOF,MAAP,CAAzB;AACAR,iCAAmBC,QAAnB,EAA6BC,IAA7B,EAAmC,EAAE,MAAMS,cAAR,EAAnC,EAA6DP,IAAE,CAA/D;AACD;AACF;AACF;AACF,OAtBD,MAsBO,IAAGM,OAAOO,UAAV,EAAsB;AAC3B;AACAjB,2BAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCQ,MAAnC,EAA2CG,UAA3C;AACD,OAHM,MAGA,IAAGH,OAAO,GAAP,KAAeA,OAAO,GAAP,EAAYO,UAA9B,EAA0C;AAC/CjB,2BAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCQ,OAAO,GAAP,CAAnC,EAAgDG,UAAhD;AACD;AACF;;AAED,WAAOR,SAAP;AACD;;AAED,WAASgB,gBAAT,CAA0BnB,IAA1B,EAAgCoB,QAAhC,EAA0C;;AAExCpB,WAAO,OAAOA,IAAP,KAAgB,QAAhB,GAA2BA,KAAKqB,KAAL,CAAW,KAAK7C,SAAhB,CAA3B,GAAwDwB,KAAKsB,KAAL,EAA/D;;AAEA;AACA;AACA;AACA,SAAI,IAAIpB,IAAI,CAAR,EAAWG,MAAML,KAAKY,MAA1B,EAAkCV,IAAE,CAAF,GAAMG,GAAxC,EAA6CH,GAA7C,EAAkD;AAChD,UAAGF,KAAKE,CAAL,MAAY,IAAZ,IAAoBF,KAAKE,IAAE,CAAP,MAAc,IAArC,EAA2C;AACzC;AACD;AACF;;AAED,QAAID,OAAO,KAAKnB,YAAhB;AACA,QAAIS,OAAOS,KAAKuB,KAAL,EAAX;;AAEA,WAAOhC,SAAS9B,SAAhB,EAA2B;;AAEzB,UAAI,CAACwC,KAAKV,IAAL,CAAL,EAAiB;AACfU,aAAKV,IAAL,IAAa,EAAb;AACD;;AAEDU,aAAOA,KAAKV,IAAL,CAAP;;AAEA,UAAIS,KAAKY,MAAL,KAAgB,CAApB,EAAuB;;AAErB,YAAI,CAACX,KAAKc,UAAV,EAAsB;AACpBd,eAAKc,UAAL,GAAkBK,QAAlB;AACD,SAFD,MAGK;AACH,cAAI,OAAOnB,KAAKc,UAAZ,KAA2B,UAA/B,EAA2C;AACzCd,iBAAKc,UAAL,GAAkB,CAACd,KAAKc,UAAN,CAAlB;AACD;;AAEDd,eAAKc,UAAL,CAAgBC,IAAhB,CAAqBI,QAArB;;AAEA,cACE,CAACnB,KAAKc,UAAL,CAAgBS,MAAjB,IACA,KAAK/C,aAAL,GAAqB,CADrB,IAEAwB,KAAKc,UAAL,CAAgBH,MAAhB,GAAyB,KAAKnC,aAHhC,EAIE;AACAwB,iBAAKc,UAAL,CAAgBS,MAAhB,GAAyB,IAAzB;AACAzC,kCAAsBd,IAAtB,CAA2B,IAA3B,EAAiCgC,KAAKc,UAAL,CAAgBH,MAAjD,EAAyDrB,IAAzD;AACD;AACF;AACD,eAAO,IAAP;AACD;AACDA,aAAOS,KAAKuB,KAAL,EAAP;AACD;AACD,WAAO,IAAP;AACD;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA3B,eAAa7B,SAAb,CAAuBS,SAAvB,GAAmC,GAAnC;;AAEAoB,eAAa7B,SAAb,CAAuB0D,eAAvB,GAAyC,UAASC,CAAT,EAAY;AACnD,QAAIA,MAAMjE,SAAV,EAAqB;AACnB,WAAKgB,aAAL,GAAqBiD,CAArB;AACA,UAAI,CAAC,KAAKrD,KAAV,EAAiB,KAAKA,KAAL,GAAa,EAAb;AACjB,WAAKA,KAAL,CAAWK,YAAX,GAA0BgD,CAA1B;AACD;AACF,GAND;;AAQA9B,eAAa7B,SAAb,CAAuB4D,KAAvB,GAA+B,EAA/B;;AAGA/B,eAAa7B,SAAb,CAAuB6D,IAAvB,GAA8B,UAASD,KAAT,EAAgBE,EAAhB,EAAoB;AAChD,WAAO,KAAKC,KAAL,CAAWH,KAAX,EAAkBE,EAAlB,EAAsB,KAAtB,CAAP;AACD,GAFD;;AAIAjC,eAAa7B,SAAb,CAAuBgE,mBAAvB,GAA6C,UAASJ,KAAT,EAAgBE,EAAhB,EAAoB;AAC/D,WAAO,KAAKC,KAAL,CAAWH,KAAX,EAAkBE,EAAlB,EAAsB,IAAtB,CAAP;AACD,GAFD;;AAIAjC,eAAa7B,SAAb,CAAuB+D,KAAvB,GAA+B,UAASH,KAAT,EAAgBE,EAAhB,EAAoBG,OAApB,EAA6B;AAC1D,SAAKC,KAAL,CAAWN,KAAX,EAAkB,CAAlB,EAAqBE,EAArB,EAAyBG,OAAzB;AACA,WAAO,IAAP;AACD,GAHD;;AAKApC,eAAa7B,SAAb,CAAuBmE,IAAvB,GAA8B,UAASP,KAAT,EAAgBQ,GAAhB,EAAqBN,EAArB,EAAyB;AACrD,WAAO,KAAKI,KAAL,CAAWN,KAAX,EAAkBQ,GAAlB,EAAuBN,EAAvB,EAA2B,KAA3B,CAAP;AACD,GAFD;;AAIAjC,eAAa7B,SAAb,CAAuBqE,WAAvB,GAAqC,UAAST,KAAT,EAAgBQ,GAAhB,EAAqBN,EAArB,EAAyB;AAC5D,WAAO,KAAKI,KAAL,CAAWN,KAAX,EAAkBQ,GAAlB,EAAuBN,EAAvB,EAA2B,IAA3B,CAAP;AACD,GAFD;;AAIAjC,eAAa7B,SAAb,CAAuBkE,KAAvB,GAA+B,UAASN,KAAT,EAAgBQ,GAAhB,EAAqBN,EAArB,EAAyBG,OAAzB,EAAkC;AAC/D,QAAIK,OAAO,IAAX;;AAEA,QAAI,OAAOR,EAAP,KAAc,UAAlB,EAA8B;AAC5B,YAAM,IAAIvC,KAAJ,CAAU,yCAAV,CAAN;AACD;;AAED,aAAS8B,QAAT,GAAoB;AAClB,UAAI,EAAEe,GAAF,KAAU,CAAd,EAAiB;AACfE,aAAKC,GAAL,CAASX,KAAT,EAAgBP,QAAhB;AACD;AACD,aAAOS,GAAGU,KAAH,CAAS,IAAT,EAAeC,SAAf,CAAP;AACD;;AAEDpB,aAASqB,OAAT,GAAmBZ,EAAnB;;AAEA,SAAKa,GAAL,CAASf,KAAT,EAAgBP,QAAhB,EAA0BY,OAA1B;;AAEA,WAAOK,IAAP;AACD,GAnBD;;AAqBAzC,eAAa7B,SAAb,CAAuB4E,IAAvB,GAA8B,YAAW;;AAEvC,SAAKvE,OAAL,IAAgBD,KAAKF,IAAL,CAAU,IAAV,CAAhB;;AAEA,QAAI+B,OAAOwC,UAAU,CAAV,CAAX;;AAEA,QAAIxC,SAAS,aAAT,IAA0B,CAAC,KAAKpB,WAApC,EAAiD;AAC/C,UAAI,CAAC,KAAKR,OAAL,CAAaQ,WAAlB,EAA+B;AAC7B,eAAO,KAAP;AACD;AACF;;AAED,QAAIgE,KAAKJ,UAAU5B,MAAnB;AACA,QAAIiC,IAAJ,EAASC,CAAT,EAAW5C,CAAX,EAAa6C,CAAb;AACA,QAAIC,OAAJ;;AAEA,QAAI,KAAKC,IAAL,IAAa,KAAKA,IAAL,CAAUrC,MAA3B,EAAmC;AACjCoC,gBAAU,KAAKC,IAAL,CAAU3B,KAAV,EAAV;AACA,UAAIsB,KAAK,CAAT,EAAY;AACVC,eAAO,IAAIlF,KAAJ,CAAUiF,EAAV,CAAP;AACA,aAAKG,IAAI,CAAT,EAAYA,IAAIH,EAAhB,EAAoBG,GAApB;AAAyBF,eAAKE,CAAL,IAAUP,UAAUO,CAAV,CAAV;AAAzB;AACD;;AAED,WAAK7C,IAAI,CAAJ,EAAO4C,IAAIE,QAAQpC,MAAxB,EAAgCV,IAAI4C,CAApC,EAAuC5C,GAAvC,EAA4C;AAC1C,aAAKyB,KAAL,GAAa3B,IAAb;AACA,gBAAQ4C,EAAR;AACA,eAAK,CAAL;AACEI,oBAAQ9C,CAAR,EAAWjC,IAAX,CAAgB,IAAhB,EAAsB+B,IAAtB;AACA;AACF,eAAK,CAAL;AACEgD,oBAAQ9C,CAAR,EAAWjC,IAAX,CAAgB,IAAhB,EAAsB+B,IAAtB,EAA4BwC,UAAU,CAAV,CAA5B;AACA;AACF,eAAK,CAAL;AACEQ,oBAAQ9C,CAAR,EAAWjC,IAAX,CAAgB,IAAhB,EAAsB+B,IAAtB,EAA4BwC,UAAU,CAAV,CAA5B,EAA0CA,UAAU,CAAV,CAA1C;AACA;AACF;AACEQ,oBAAQ9C,CAAR,EAAWqC,KAAX,CAAiB,IAAjB,EAAuBM,IAAvB;AAXF;AAaD;AACF;;AAED,QAAI,KAAKlE,QAAT,EAAmB;AACjBqE,gBAAU,EAAV;AACA,UAAIE,KAAK,OAAOlD,IAAP,KAAgB,QAAhB,GAA2BA,KAAKqB,KAAL,CAAW,KAAK7C,SAAhB,CAA3B,GAAwDwB,KAAKsB,KAAL,EAAjE;AACAxB,yBAAmB7B,IAAnB,CAAwB,IAAxB,EAA8B+E,OAA9B,EAAuCE,EAAvC,EAA2C,KAAKpE,YAAhD,EAA8D,CAA9D;AACD,KAJD,MAIO;AACLkE,gBAAU,KAAK5E,OAAL,CAAa4B,IAAb,CAAV;AACA,UAAI,OAAOgD,OAAP,KAAmB,UAAvB,EAAmC;AACjC,aAAKrB,KAAL,GAAa3B,IAAb;AACA,gBAAQ4C,EAAR;AACA,eAAK,CAAL;AACEI,oBAAQ/E,IAAR,CAAa,IAAb;AACA;AACF,eAAK,CAAL;AACE+E,oBAAQ/E,IAAR,CAAa,IAAb,EAAmBuE,UAAU,CAAV,CAAnB;AACA;AACF,eAAK,CAAL;AACEQ,oBAAQ/E,IAAR,CAAa,IAAb,EAAmBuE,UAAU,CAAV,CAAnB,EAAiCA,UAAU,CAAV,CAAjC;AACA;AACF;AACEK,mBAAO,IAAIlF,KAAJ,CAAUiF,KAAK,CAAf,CAAP;AACA,iBAAKG,IAAI,CAAT,EAAYA,IAAIH,EAAhB,EAAoBG,GAApB;AAAyBF,mBAAKE,IAAI,CAAT,IAAcP,UAAUO,CAAV,CAAd;AAAzB,aACAC,QAAQT,KAAR,CAAc,IAAd,EAAoBM,IAApB;AAbF;AAeA,eAAO,IAAP;AACD,OAlBD,MAkBO,IAAIG,OAAJ,EAAa;AAClB;AACA;AACAA,kBAAUA,QAAQ1B,KAAR,EAAV;AACD;AACF;;AAED,QAAI0B,WAAWA,QAAQpC,MAAvB,EAA+B;AAC7B,UAAIgC,KAAK,CAAT,EAAY;AACVC,eAAO,IAAIlF,KAAJ,CAAUiF,KAAK,CAAf,CAAP;AACA,aAAKG,IAAI,CAAT,EAAYA,IAAIH,EAAhB,EAAoBG,GAApB;AAAyBF,eAAKE,IAAI,CAAT,IAAcP,UAAUO,CAAV,CAAd;AAAzB;AACD;AACD,WAAK7C,IAAI,CAAJ,EAAO4C,IAAIE,QAAQpC,MAAxB,EAAgCV,IAAI4C,CAApC,EAAuC5C,GAAvC,EAA4C;AAC1C,aAAKyB,KAAL,GAAa3B,IAAb;AACA,gBAAQ4C,EAAR;AACA,eAAK,CAAL;AACEI,oBAAQ9C,CAAR,EAAWjC,IAAX,CAAgB,IAAhB;AACA;AACF,eAAK,CAAL;AACE+E,oBAAQ9C,CAAR,EAAWjC,IAAX,CAAgB,IAAhB,EAAsBuE,UAAU,CAAV,CAAtB;AACA;AACF,eAAK,CAAL;AACEQ,oBAAQ9C,CAAR,EAAWjC,IAAX,CAAgB,IAAhB,EAAsBuE,UAAU,CAAV,CAAtB,EAAoCA,UAAU,CAAV,CAApC;AACA;AACF;AACEQ,oBAAQ9C,CAAR,EAAWqC,KAAX,CAAiB,IAAjB,EAAuBM,IAAvB;AAXF;AAaD;AACD,aAAO,IAAP;AACD,KAtBD,MAsBO,IAAI,CAAC,KAAKI,IAAN,IAAcjD,SAAS,OAA3B,EAAoC;AACzC,UAAIwC,UAAU,CAAV,aAAwBlD,KAA5B,EAAmC;AACjC,cAAMkD,UAAU,CAAV,CAAN,CADiC,CACb;AACrB,OAFD,MAEO;AACL,cAAM,IAAIlD,KAAJ,CAAU,sCAAV,CAAN;AACD;AACD,aAAO,KAAP;AACD;;AAED,WAAO,CAAC,CAAC,KAAK2D,IAAd;AACD,GAxGD;;AA0GArD,eAAa7B,SAAb,CAAuBoF,SAAvB,GAAmC,YAAW;;AAE5C,SAAK/E,OAAL,IAAgBD,KAAKF,IAAL,CAAU,IAAV,CAAhB;;AAEA,QAAI+B,OAAOwC,UAAU,CAAV,CAAX;;AAEA,QAAIxC,SAAS,aAAT,IAA0B,CAAC,KAAKpB,WAApC,EAAiD;AAC7C,UAAI,CAAC,KAAKR,OAAL,CAAaQ,WAAlB,EAA+B;AAAE,eAAOwE,QAAQC,OAAR,CAAgB,CAAC,KAAD,CAAhB,CAAP;AAAkC;AACtE;;AAED,QAAIC,WAAU,EAAd;;AAEA,QAAIV,KAAKJ,UAAU5B,MAAnB;AACA,QAAIiC,IAAJ,EAASC,CAAT,EAAW5C,CAAX,EAAa6C,CAAb;AACA,QAAIC,OAAJ;;AAEA,QAAI,KAAKC,IAAT,EAAe;AACb,UAAIL,KAAK,CAAT,EAAY;AACVC,eAAO,IAAIlF,KAAJ,CAAUiF,EAAV,CAAP;AACA,aAAKG,IAAI,CAAT,EAAYA,IAAIH,EAAhB,EAAoBG,GAApB;AAAyBF,eAAKE,CAAL,IAAUP,UAAUO,CAAV,CAAV;AAAzB;AACD;AACD,WAAK7C,IAAI,CAAJ,EAAO4C,IAAI,KAAKG,IAAL,CAAUrC,MAA1B,EAAkCV,IAAI4C,CAAtC,EAAyC5C,GAAzC,EAA8C;AAC5C,aAAKyB,KAAL,GAAa3B,IAAb;AACA,gBAAQ4C,EAAR;AACA,eAAK,CAAL;AACEU,qBAAStC,IAAT,CAAc,KAAKiC,IAAL,CAAU/C,CAAV,EAAajC,IAAb,CAAkB,IAAlB,EAAwB+B,IAAxB,CAAd;AACA;AACF,eAAK,CAAL;AACEsD,qBAAStC,IAAT,CAAc,KAAKiC,IAAL,CAAU/C,CAAV,EAAajC,IAAb,CAAkB,IAAlB,EAAwB+B,IAAxB,EAA8BwC,UAAU,CAAV,CAA9B,CAAd;AACA;AACF,eAAK,CAAL;AACEc,qBAAStC,IAAT,CAAc,KAAKiC,IAAL,CAAU/C,CAAV,EAAajC,IAAb,CAAkB,IAAlB,EAAwB+B,IAAxB,EAA8BwC,UAAU,CAAV,CAA9B,EAA4CA,UAAU,CAAV,CAA5C,CAAd;AACA;AACF;AACEc,qBAAStC,IAAT,CAAc,KAAKiC,IAAL,CAAU/C,CAAV,EAAaqC,KAAb,CAAmB,IAAnB,EAAyBM,IAAzB,CAAd;AAXF;AAaD;AACF;;AAED,QAAI,KAAKlE,QAAT,EAAmB;AACjBqE,gBAAU,EAAV;AACA,UAAIE,KAAK,OAAOlD,IAAP,KAAgB,QAAhB,GAA2BA,KAAKqB,KAAL,CAAW,KAAK7C,SAAhB,CAA3B,GAAwDwB,KAAKsB,KAAL,EAAjE;AACAxB,yBAAmB7B,IAAnB,CAAwB,IAAxB,EAA8B+E,OAA9B,EAAuCE,EAAvC,EAA2C,KAAKpE,YAAhD,EAA8D,CAA9D;AACD,KAJD,MAIO;AACLkE,gBAAU,KAAK5E,OAAL,CAAa4B,IAAb,CAAV;AACD;;AAED,QAAI,OAAOgD,OAAP,KAAmB,UAAvB,EAAmC;AACjC,WAAKrB,KAAL,GAAa3B,IAAb;AACA,cAAQ4C,EAAR;AACA,aAAK,CAAL;AACEU,mBAAStC,IAAT,CAAcgC,QAAQ/E,IAAR,CAAa,IAAb,CAAd;AACA;AACF,aAAK,CAAL;AACEqF,mBAAStC,IAAT,CAAcgC,QAAQ/E,IAAR,CAAa,IAAb,EAAmBuE,UAAU,CAAV,CAAnB,CAAd;AACA;AACF,aAAK,CAAL;AACEc,mBAAStC,IAAT,CAAcgC,QAAQ/E,IAAR,CAAa,IAAb,EAAmBuE,UAAU,CAAV,CAAnB,EAAiCA,UAAU,CAAV,CAAjC,CAAd;AACA;AACF;AACEK,iBAAO,IAAIlF,KAAJ,CAAUiF,KAAK,CAAf,CAAP;AACA,eAAKG,IAAI,CAAT,EAAYA,IAAIH,EAAhB,EAAoBG,GAApB;AAAyBF,iBAAKE,IAAI,CAAT,IAAcP,UAAUO,CAAV,CAAd;AAAzB,WACAO,SAAStC,IAAT,CAAcgC,QAAQT,KAAR,CAAc,IAAd,EAAoBM,IAApB,CAAd;AAbF;AAeD,KAjBD,MAiBO,IAAIG,WAAWA,QAAQpC,MAAvB,EAA+B;AACpCoC,gBAAUA,QAAQ1B,KAAR,EAAV;AACA,UAAIsB,KAAK,CAAT,EAAY;AACVC,eAAO,IAAIlF,KAAJ,CAAUiF,KAAK,CAAf,CAAP;AACA,aAAKG,IAAI,CAAT,EAAYA,IAAIH,EAAhB,EAAoBG,GAApB;AAAyBF,eAAKE,IAAI,CAAT,IAAcP,UAAUO,CAAV,CAAd;AAAzB;AACD;AACD,WAAK7C,IAAI,CAAJ,EAAO4C,IAAIE,QAAQpC,MAAxB,EAAgCV,IAAI4C,CAApC,EAAuC5C,GAAvC,EAA4C;AAC1C,aAAKyB,KAAL,GAAa3B,IAAb;AACA,gBAAQ4C,EAAR;AACA,eAAK,CAAL;AACEU,qBAAStC,IAAT,CAAcgC,QAAQ9C,CAAR,EAAWjC,IAAX,CAAgB,IAAhB,CAAd;AACA;AACF,eAAK,CAAL;AACEqF,qBAAStC,IAAT,CAAcgC,QAAQ9C,CAAR,EAAWjC,IAAX,CAAgB,IAAhB,EAAsBuE,UAAU,CAAV,CAAtB,CAAd;AACA;AACF,eAAK,CAAL;AACEc,qBAAStC,IAAT,CAAcgC,QAAQ9C,CAAR,EAAWjC,IAAX,CAAgB,IAAhB,EAAsBuE,UAAU,CAAV,CAAtB,EAAoCA,UAAU,CAAV,CAApC,CAAd;AACA;AACF;AACEc,qBAAStC,IAAT,CAAcgC,QAAQ9C,CAAR,EAAWqC,KAAX,CAAiB,IAAjB,EAAuBM,IAAvB,CAAd;AAXF;AAaD;AACF,KAtBM,MAsBA,IAAI,CAAC,KAAKI,IAAN,IAAcjD,SAAS,OAA3B,EAAoC;AACzC,UAAIwC,UAAU,CAAV,aAAwBlD,KAA5B,EAAmC;AACjC,eAAO8D,QAAQG,MAAR,CAAef,UAAU,CAAV,CAAf,CAAP,CADiC,CACI;AACtC,OAFD,MAEO;AACL,eAAOY,QAAQG,MAAR,CAAe,sCAAf,CAAP;AACD;AACF;;AAED,WAAOH,QAAQI,GAAR,CAAYF,QAAZ,CAAP;AACD,GA/FD;;AAiGA1D,eAAa7B,SAAb,CAAuB0F,EAAvB,GAA4B,UAASzD,IAAT,EAAeoB,QAAf,EAAyB;AACnD,WAAO,KAAKsB,GAAL,CAAS1C,IAAT,EAAeoB,QAAf,EAAyB,KAAzB,CAAP;AACD,GAFD;;AAIAxB,eAAa7B,SAAb,CAAuB2F,eAAvB,GAAyC,UAAS1D,IAAT,EAAeoB,QAAf,EAAyB;AAChE,WAAO,KAAKsB,GAAL,CAAS1C,IAAT,EAAeoB,QAAf,EAAyB,IAAzB,CAAP;AACD,GAFD;;AAIAxB,eAAa7B,SAAb,CAAuB4F,KAAvB,GAA+B,UAAS9B,EAAT,EAAa;AAC1C,WAAO,KAAK+B,MAAL,CAAY/B,EAAZ,EAAgB,KAAhB,CAAP;AACD,GAFD;;AAIAjC,eAAa7B,SAAb,CAAuB8F,UAAvB,GAAoC,UAAShC,EAAT,EAAa;AAC/C,WAAO,KAAK+B,MAAL,CAAY/B,EAAZ,EAAgB,IAAhB,CAAP;AACD,GAFD;;AAIAjC,eAAa7B,SAAb,CAAuB+F,WAAvB,GAAqClE,aAAa7B,SAAb,CAAuB0F,EAA5D;;AAEA7D,eAAa7B,SAAb,CAAuB6F,MAAvB,GAAgC,UAAS/B,EAAT,EAAaG,OAAb,EAAqB;AACnD,QAAI,OAAOH,EAAP,KAAc,UAAlB,EAA8B;AAC5B,YAAM,IAAIvC,KAAJ,CAAU,0CAAV,CAAN;AACD;;AAED,QAAI,CAAC,KAAK2D,IAAV,EAAgB;AACd,WAAKA,IAAL,GAAY,EAAZ;AACD;;AAED;AACA,QAAGjB,OAAH,EAAW;AACT,WAAKiB,IAAL,CAAUc,OAAV,CAAkBlC,EAAlB;AACD,KAFD,MAEK;AACH,WAAKoB,IAAL,CAAUjC,IAAV,CAAea,EAAf;AACD;;AAED,WAAO,IAAP;AACD,GAjBD;;AAmBAjC,eAAa7B,SAAb,CAAuB2E,GAAvB,GAA6B,UAAS1C,IAAT,EAAeoB,QAAf,EAAyBY,OAAzB,EAAkC;AAC7D,QAAI,OAAOhC,IAAP,KAAgB,UAApB,EAAgC;AAC9B,WAAK4D,MAAL,CAAY5D,IAAZ,EAAkBoB,QAAlB;AACA,aAAO,IAAP;AACD;;AAED,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,YAAM,IAAI9B,KAAJ,CAAU,uCAAV,CAAN;AACD;AACD,SAAKlB,OAAL,IAAgBD,KAAKF,IAAL,CAAU,IAAV,CAAhB;;AAEA;AACA;AACA,SAAK0E,IAAL,CAAU,aAAV,EAAyB3C,IAAzB,EAA+BoB,QAA/B;;AAEA,QAAI,KAAKzC,QAAT,EAAmB;AACjBwC,uBAAiBlD,IAAjB,CAAsB,IAAtB,EAA4B+B,IAA5B,EAAkCoB,QAAlC;AACA,aAAO,IAAP;AACD;;AAED,QAAI,CAAC,KAAKhD,OAAL,CAAa4B,IAAb,CAAL,EAAyB;AACvB;AACA,WAAK5B,OAAL,CAAa4B,IAAb,IAAqBoB,QAArB;AACD,KAHD,MAIK;AACH,UAAI,OAAO,KAAKhD,OAAL,CAAa4B,IAAb,CAAP,KAA8B,UAAlC,EAA8C;AAC5C;AACA,aAAK5B,OAAL,CAAa4B,IAAb,IAAqB,CAAC,KAAK5B,OAAL,CAAa4B,IAAb,CAAD,CAArB;AACD;;AAED;AACA,UAAGgC,OAAH,EAAW;AACT,aAAK5D,OAAL,CAAa4B,IAAb,EAAmB+D,OAAnB,CAA2B3C,QAA3B;AACD,OAFD,MAEK;AACH,aAAKhD,OAAL,CAAa4B,IAAb,EAAmBgB,IAAnB,CAAwBI,QAAxB;AACD;;AAED;AACA,UACE,CAAC,KAAKhD,OAAL,CAAa4B,IAAb,EAAmBwB,MAApB,IACA,KAAK/C,aAAL,GAAqB,CADrB,IAEA,KAAKL,OAAL,CAAa4B,IAAb,EAAmBY,MAAnB,GAA4B,KAAKnC,aAHnC,EAIE;AACA,aAAKL,OAAL,CAAa4B,IAAb,EAAmBwB,MAAnB,GAA4B,IAA5B;AACAzC,8BAAsBd,IAAtB,CAA2B,IAA3B,EAAiC,KAAKG,OAAL,CAAa4B,IAAb,EAAmBY,MAApD,EAA4DZ,IAA5D;AACD;AACF;;AAED,WAAO,IAAP;AACD,GAjDD;;AAmDAJ,eAAa7B,SAAb,CAAuBuE,GAAvB,GAA6B,UAAStC,IAAT,EAAeoB,QAAf,EAAyB;AACpD,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,YAAM,IAAI9B,KAAJ,CAAU,iDAAV,CAAN;AACD;;AAED,QAAIS,QAAJ;AAAA,QAAaiE,QAAM,EAAnB;;AAEA,QAAG,KAAKrF,QAAR,EAAkB;AAChB,UAAIuE,KAAK,OAAOlD,IAAP,KAAgB,QAAhB,GAA2BA,KAAKqB,KAAL,CAAW,KAAK7C,SAAhB,CAA3B,GAAwDwB,KAAKsB,KAAL,EAAjE;AACA0C,cAAQlE,mBAAmB7B,IAAnB,CAAwB,IAAxB,EAA8B,IAA9B,EAAoCiF,EAApC,EAAwC,KAAKpE,YAA7C,EAA2D,CAA3D,CAAR;AACD,KAHD,MAIK;AACH;AACA,UAAI,CAAC,KAAKV,OAAL,CAAa4B,IAAb,CAAL,EAAyB,OAAO,IAAP;AACzBD,iBAAW,KAAK3B,OAAL,CAAa4B,IAAb,CAAX;AACAgE,YAAMhD,IAAN,CAAW,EAACD,YAAWhB,QAAZ,EAAX;AACD;;AAED,SAAK,IAAIkE,QAAM,CAAf,EAAkBA,QAAMD,MAAMpD,MAA9B,EAAsCqD,OAAtC,EAA+C;AAC7C,UAAI7D,OAAO4D,MAAMC,KAAN,CAAX;AACAlE,iBAAWK,KAAKW,UAAhB;AACA,UAAIrD,QAAQqC,QAAR,CAAJ,EAAuB;;AAErB,YAAImE,WAAW,CAAC,CAAhB;;AAEA,aAAK,IAAIhE,IAAI,CAAR,EAAWU,SAASb,SAASa,MAAlC,EAA0CV,IAAIU,MAA9C,EAAsDV,GAAtD,EAA2D;AACzD,cAAIH,SAASG,CAAT,MAAgBkB,QAAhB,IACDrB,SAASG,CAAT,EAAYkB,QAAZ,IAAwBrB,SAASG,CAAT,EAAYkB,QAAZ,KAAyBA,QADhD,IAEDrB,SAASG,CAAT,EAAYuC,OAAZ,IAAuB1C,SAASG,CAAT,EAAYuC,OAAZ,KAAwBrB,QAFlD,EAE6D;AAC3D8C,uBAAWhE,CAAX;AACA;AACD;AACF;;AAED,YAAIgE,WAAW,CAAf,EAAkB;AAChB;AACD;;AAED,YAAG,KAAKvF,QAAR,EAAkB;AAChByB,eAAKW,UAAL,CAAgBoD,MAAhB,CAAuBD,QAAvB,EAAiC,CAAjC;AACD,SAFD,MAGK;AACH,eAAK9F,OAAL,CAAa4B,IAAb,EAAmBmE,MAAnB,CAA0BD,QAA1B,EAAoC,CAApC;AACD;;AAED,YAAInE,SAASa,MAAT,KAAoB,CAAxB,EAA2B;AACzB,cAAG,KAAKjC,QAAR,EAAkB;AAChB,mBAAOyB,KAAKW,UAAZ;AACD,WAFD,MAGK;AACH,mBAAO,KAAK3C,OAAL,CAAa4B,IAAb,CAAP;AACD;AACF;;AAED,aAAK2C,IAAL,CAAU,gBAAV,EAA4B3C,IAA5B,EAAkCoB,QAAlC;;AAEA,eAAO,IAAP;AACD,OApCD,MAqCK,IAAIrB,aAAaqB,QAAb,IACNrB,SAASqB,QAAT,IAAqBrB,SAASqB,QAAT,KAAsBA,QADrC,IAENrB,SAAS0C,OAAT,IAAoB1C,SAAS0C,OAAT,KAAqBrB,QAFvC,EAEkD;AACrD,YAAG,KAAKzC,QAAR,EAAkB;AAChB,iBAAOyB,KAAKW,UAAZ;AACD,SAFD,MAGK;AACH,iBAAO,KAAK3C,OAAL,CAAa4B,IAAb,CAAP;AACD;;AAED,aAAK2C,IAAL,CAAU,gBAAV,EAA4B3C,IAA5B,EAAkCoB,QAAlC;AACD;AACF;;AAED,aAASgD,yBAAT,CAAmCC,IAAnC,EAAyC;AACvC,UAAIA,SAAS5G,SAAb,EAAwB;AACtB;AACD;AACD,UAAI6G,OAAOxG,OAAOwG,IAAP,CAAYD,IAAZ,CAAX;AACA,WAAK,IAAInE,CAAT,IAAcoE,IAAd,EAAoB;AAClB,YAAIC,MAAMD,KAAKpE,CAAL,CAAV;AACA,YAAIrC,MAAMwG,KAAKE,GAAL,CAAV;AACA,YAAK1G,eAAe2G,QAAhB,IAA8B,QAAO3G,GAAP,yCAAOA,GAAP,OAAe,QAA7C,IAA2DA,QAAQ,IAAvE,EACE;AACF,YAAIC,OAAOwG,IAAP,CAAYzG,GAAZ,EAAiB+C,MAAjB,GAA0B,CAA9B,EAAiC;AAC/BwD,oCAA0BC,KAAKE,GAAL,CAA1B;AACD;AACD,YAAIzG,OAAOwG,IAAP,CAAYzG,GAAZ,EAAiB+C,MAAjB,KAA4B,CAAhC,EAAmC;AACjC,iBAAOyD,KAAKE,GAAL,CAAP;AACD;AACF;AACF;AACDH,8BAA0B,KAAKtF,YAA/B;;AAEA,WAAO,IAAP;AACD,GA7FD;;AA+FAc,eAAa7B,SAAb,CAAuB0G,MAAvB,GAAgC,UAAS5C,EAAT,EAAa;AAC3C,QAAI3B,IAAI,CAAR;AAAA,QAAW4C,IAAI,CAAf;AAAA,QAAkB4B,GAAlB;AACA,QAAI7C,MAAM,KAAKoB,IAAX,IAAmB,KAAKA,IAAL,CAAUrC,MAAV,GAAmB,CAA1C,EAA6C;AAC3C8D,YAAM,KAAKzB,IAAX;AACA,WAAI/C,IAAI,CAAJ,EAAO4C,IAAI4B,IAAI9D,MAAnB,EAA2BV,IAAI4C,CAA/B,EAAkC5C,GAAlC,EAAuC;AACrC,YAAG2B,OAAO6C,IAAIxE,CAAJ,CAAV,EAAkB;AAChBwE,cAAIP,MAAJ,CAAWjE,CAAX,EAAc,CAAd;AACA,eAAKyC,IAAL,CAAU,mBAAV,EAA+Bd,EAA/B;AACA,iBAAO,IAAP;AACD;AACF;AACF,KATD,MASO;AACL6C,YAAM,KAAKzB,IAAX;AACA,WAAI/C,IAAI,CAAJ,EAAO4C,IAAI4B,IAAI9D,MAAnB,EAA2BV,IAAI4C,CAA/B,EAAkC5C,GAAlC;AACE,aAAKyC,IAAL,CAAU,mBAAV,EAA+B+B,IAAIxE,CAAJ,CAA/B;AADF,OAEA,KAAK+C,IAAL,GAAY,EAAZ;AACD;AACD,WAAO,IAAP;AACD,GAlBD;;AAoBArD,eAAa7B,SAAb,CAAuB4G,cAAvB,GAAwC/E,aAAa7B,SAAb,CAAuBuE,GAA/D;;AAEA1C,eAAa7B,SAAb,CAAuB6G,kBAAvB,GAA4C,UAAS5E,IAAT,EAAe;AACzD,QAAIwC,UAAU5B,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,OAAC,KAAKxC,OAAN,IAAiBD,KAAKF,IAAL,CAAU,IAAV,CAAjB;AACA,aAAO,IAAP;AACD;;AAED,QAAI,KAAKU,QAAT,EAAmB;AACjB,UAAIuE,KAAK,OAAOlD,IAAP,KAAgB,QAAhB,GAA2BA,KAAKqB,KAAL,CAAW,KAAK7C,SAAhB,CAA3B,GAAwDwB,KAAKsB,KAAL,EAAjE;AACA,UAAI0C,QAAQlE,mBAAmB7B,IAAnB,CAAwB,IAAxB,EAA8B,IAA9B,EAAoCiF,EAApC,EAAwC,KAAKpE,YAA7C,EAA2D,CAA3D,CAAZ;;AAEA,WAAK,IAAImF,QAAM,CAAf,EAAkBA,QAAMD,MAAMpD,MAA9B,EAAsCqD,OAAtC,EAA+C;AAC7C,YAAI7D,OAAO4D,MAAMC,KAAN,CAAX;AACA7D,aAAKW,UAAL,GAAkB,IAAlB;AACD;AACF,KARD,MASK,IAAI,KAAK3C,OAAT,EAAkB;AACrB,WAAKA,OAAL,CAAa4B,IAAb,IAAqB,IAArB;AACD;AACD,WAAO,IAAP;AACD,GAnBD;;AAqBAJ,eAAa7B,SAAb,CAAuBoC,SAAvB,GAAmC,UAASH,IAAT,EAAe;AAChD,QAAI,KAAKrB,QAAT,EAAmB;AACjB,UAAIoB,WAAW,EAAf;AACA,UAAImD,KAAK,OAAOlD,IAAP,KAAgB,QAAhB,GAA2BA,KAAKqB,KAAL,CAAW,KAAK7C,SAAhB,CAA3B,GAAwDwB,KAAKsB,KAAL,EAAjE;AACAxB,yBAAmB7B,IAAnB,CAAwB,IAAxB,EAA8B8B,QAA9B,EAAwCmD,EAAxC,EAA4C,KAAKpE,YAAjD,EAA+D,CAA/D;AACA,aAAOiB,QAAP;AACD;;AAED,SAAK3B,OAAL,IAAgBD,KAAKF,IAAL,CAAU,IAAV,CAAhB;;AAEA,QAAI,CAAC,KAAKG,OAAL,CAAa4B,IAAb,CAAL,EAAyB,KAAK5B,OAAL,CAAa4B,IAAb,IAAqB,EAArB;AACzB,QAAI,CAACtC,QAAQ,KAAKU,OAAL,CAAa4B,IAAb,CAAR,CAAL,EAAkC;AAChC,WAAK5B,OAAL,CAAa4B,IAAb,IAAqB,CAAC,KAAK5B,OAAL,CAAa4B,IAAb,CAAD,CAArB;AACD;AACD,WAAO,KAAK5B,OAAL,CAAa4B,IAAb,CAAP;AACD,GAfD;;AAiBAJ,eAAa7B,SAAb,CAAuB8G,UAAvB,GAAoC,YAAU;AAC5C,WAAO/G,OAAOwG,IAAP,CAAY,KAAKlG,OAAjB,CAAP;AACD,GAFD;;AAIAwB,eAAa7B,SAAb,CAAuB+G,aAAvB,GAAuC,UAAS9E,IAAT,EAAe;AACpD,WAAO,KAAKG,SAAL,CAAeH,IAAf,EAAqBY,MAA5B;AACD,GAFD;;AAIAhB,eAAa7B,SAAb,CAAuBgH,YAAvB,GAAsC,YAAW;;AAE/C,QAAG,KAAK9B,IAAR,EAAc;AACZ,aAAO,KAAKA,IAAZ;AACD,KAFD,MAGK;AACH,aAAO,EAAP;AACD;AAEF,GATD;;AAWA,MAAI,OAAO+B,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,GAA3C,EAAgD;AAC7C;AACDD,WAAO,YAAW;AAChB,aAAOpF,YAAP;AACD,KAFD;AAGD,GALD,MAKO,IAAI,QAAOsF,OAAP,yCAAOA,OAAP,OAAmB,QAAvB,EAAiC;AACtC;AACAC,WAAOD,OAAP,GAAiBtF,YAAjB;AACD,GAHM,MAIF;AACH;AACAwF,WAAOvF,aAAP,GAAuBD,YAAvB;AACD;AACF,CAhwBC,EAAD","file":"eventemitter2.js","sourcesContent":["/*!\r\n * EventEmitter2\r\n * https://github.com/hij1nx/EventEmitter2\r\n *\r\n * Copyright (c) 2013 hij1nx\r\n * Licensed under the MIT license.\r\n */\r\n;!function(undefined) {\r\n\r\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\r\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n  };\r\n  var defaultMaxListeners = 10;\r\n\r\n  function init() {\r\n    this._events = {};\r\n    if (this._conf) {\r\n      configure.call(this, this._conf);\r\n    }\r\n  }\r\n\r\n  function configure(conf) {\r\n    if (conf) {\r\n      this._conf = conf;\r\n\r\n      conf.delimiter && (this.delimiter = conf.delimiter);\r\n      this._maxListeners = conf.maxListeners !== undefined ? conf.maxListeners : defaultMaxListeners;\r\n\r\n      conf.wildcard && (this.wildcard = conf.wildcard);\r\n      conf.newListener && (this.newListener = conf.newListener);\r\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\r\n\r\n      if (this.wildcard) {\r\n        this.listenerTree = {};\r\n      }\r\n    } else {\r\n      this._maxListeners = defaultMaxListeners;\r\n    }\r\n  }\r\n\r\n  function logPossibleMemoryLeak(count, eventName) {\r\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\r\n        'leak detected. ' + count + ' listeners added. ' +\r\n        'Use emitter.setMaxListeners() to increase limit.';\r\n\r\n    if(this.verboseMemoryLeak){\r\n      errorMsg += ' Event name: ' + eventName + '.';\r\n    }\r\n\r\n    if(typeof process !== 'undefined' && process.emitWarning){\r\n      var e = new Error(errorMsg);\r\n      e.name = 'MaxListenersExceededWarning';\r\n      e.emitter = this;\r\n      e.count = count;\r\n      process.emitWarning(e);\r\n    } else {\r\n      console.error(errorMsg);\r\n\r\n      if (console.trace){\r\n        console.trace();\r\n      }\r\n    }\r\n  }\r\n\r\n  function EventEmitter(conf) {\r\n    this._events = {};\r\n    this.newListener = false;\r\n    this.verboseMemoryLeak = false;\r\n    configure.call(this, conf);\r\n  }\r\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\r\n\r\n  //\r\n  // Attention, function return type now is array, always !\r\n  // It has zero elements if no any matches found and one or more\r\n  // elements (leafs) if there are matches\r\n  //\r\n  function searchListenerTree(handlers, type, tree, i) {\r\n    if (!tree) {\r\n      return [];\r\n    }\r\n    var listeners=[], leaf, len, branch, xTree, xxTree, isolatedBranch, endReached,\r\n        typeLength = type.length, currentType = type[i], nextType = type[i+1];\r\n    if (i === typeLength && tree._listeners) {\r\n      //\r\n      // If at the end of the event(s) list and the tree has listeners\r\n      // invoke those listeners.\r\n      //\r\n      if (typeof tree._listeners === 'function') {\r\n        handlers && handlers.push(tree._listeners);\r\n        return [tree];\r\n      } else {\r\n        for (leaf = 0, len = tree._listeners.length; leaf < len; leaf++) {\r\n          handlers && handlers.push(tree._listeners[leaf]);\r\n        }\r\n        return [tree];\r\n      }\r\n    }\r\n\r\n    if ((currentType === '*' || currentType === '**') || tree[currentType]) {\r\n      //\r\n      // If the event emitted is '*' at this part\r\n      // or there is a concrete match at this patch\r\n      //\r\n      if (currentType === '*') {\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+1));\r\n          }\r\n        }\r\n        return listeners;\r\n      } else if(currentType === '**') {\r\n        endReached = (i+1 === typeLength || (i+2 === typeLength && nextType === '*'));\r\n        if(endReached && tree._listeners) {\r\n          // The next element has a _listeners, add it to the handlers.\r\n          listeners = listeners.concat(searchListenerTree(handlers, type, tree, typeLength));\r\n        }\r\n\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            if(branch === '*' || branch === '**') {\r\n              if(tree[branch]._listeners && !endReached) {\r\n                listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], typeLength));\r\n              }\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            } else if(branch === nextType) {\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+2));\r\n            } else {\r\n              // No match on this one, shift into the tree but not in the type array.\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            }\r\n          }\r\n        }\r\n        return listeners;\r\n      }\r\n\r\n      listeners = listeners.concat(searchListenerTree(handlers, type, tree[currentType], i+1));\r\n    }\r\n\r\n    xTree = tree['*'];\r\n    if (xTree) {\r\n      //\r\n      // If the listener tree will allow any match for this part,\r\n      // then recursively explore all branches of the tree\r\n      //\r\n      searchListenerTree(handlers, type, xTree, i+1);\r\n    }\r\n\r\n    xxTree = tree['**'];\r\n    if(xxTree) {\r\n      if(i < typeLength) {\r\n        if(xxTree._listeners) {\r\n          // If we have a listener on a '**', it will catch all, so add its handler.\r\n          searchListenerTree(handlers, type, xxTree, typeLength);\r\n        }\r\n\r\n        // Build arrays of matching next branches and others.\r\n        for(branch in xxTree) {\r\n          if(branch !== '_listeners' && xxTree.hasOwnProperty(branch)) {\r\n            if(branch === nextType) {\r\n              // We know the next element will match, so jump twice.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+2);\r\n            } else if(branch === currentType) {\r\n              // Current node matches, move into the tree.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+1);\r\n            } else {\r\n              isolatedBranch = {};\r\n              isolatedBranch[branch] = xxTree[branch];\r\n              searchListenerTree(handlers, type, { '**': isolatedBranch }, i+1);\r\n            }\r\n          }\r\n        }\r\n      } else if(xxTree._listeners) {\r\n        // We have reached the end and still on a '**'\r\n        searchListenerTree(handlers, type, xxTree, typeLength);\r\n      } else if(xxTree['*'] && xxTree['*']._listeners) {\r\n        searchListenerTree(handlers, type, xxTree['*'], typeLength);\r\n      }\r\n    }\r\n\r\n    return listeners;\r\n  }\r\n\r\n  function growListenerTree(type, listener) {\r\n\r\n    type = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n\r\n    //\r\n    // Looks for two consecutive '**', if so, don't add the event at all.\r\n    //\r\n    for(var i = 0, len = type.length; i+1 < len; i++) {\r\n      if(type[i] === '**' && type[i+1] === '**') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var tree = this.listenerTree;\r\n    var name = type.shift();\r\n\r\n    while (name !== undefined) {\r\n\r\n      if (!tree[name]) {\r\n        tree[name] = {};\r\n      }\r\n\r\n      tree = tree[name];\r\n\r\n      if (type.length === 0) {\r\n\r\n        if (!tree._listeners) {\r\n          tree._listeners = listener;\r\n        }\r\n        else {\r\n          if (typeof tree._listeners === 'function') {\r\n            tree._listeners = [tree._listeners];\r\n          }\r\n\r\n          tree._listeners.push(listener);\r\n\r\n          if (\r\n            !tree._listeners.warned &&\r\n            this._maxListeners > 0 &&\r\n            tree._listeners.length > this._maxListeners\r\n          ) {\r\n            tree._listeners.warned = true;\r\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n      name = type.shift();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // By default EventEmitters will print a warning if more than\r\n  // 10 listeners are added to it. This is a useful default which\r\n  // helps finding memory leaks.\r\n  //\r\n  // Obviously not all Emitters should be limited to 10. This function allows\r\n  // that to be increased. Set to zero for unlimited.\r\n\r\n  EventEmitter.prototype.delimiter = '.';\r\n\r\n  EventEmitter.prototype.setMaxListeners = function(n) {\r\n    if (n !== undefined) {\r\n      this._maxListeners = n;\r\n      if (!this._conf) this._conf = {};\r\n      this._conf.maxListeners = n;\r\n    }\r\n  };\r\n\r\n  EventEmitter.prototype.event = '';\r\n\r\n\r\n  EventEmitter.prototype.once = function(event, fn) {\r\n    return this._once(event, fn, false);\r\n  };\r\n\r\n  EventEmitter.prototype.prependOnceListener = function(event, fn) {\r\n    return this._once(event, fn, true);\r\n  };\r\n\r\n  EventEmitter.prototype._once = function(event, fn, prepend) {\r\n    this._many(event, 1, fn, prepend);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.many = function(event, ttl, fn) {\r\n    return this._many(event, ttl, fn, false);\r\n  }\r\n\r\n  EventEmitter.prototype.prependMany = function(event, ttl, fn) {\r\n    return this._many(event, ttl, fn, true);\r\n  }\r\n\r\n  EventEmitter.prototype._many = function(event, ttl, fn, prepend) {\r\n    var self = this;\r\n\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('many only accepts instances of Function');\r\n    }\r\n\r\n    function listener() {\r\n      if (--ttl === 0) {\r\n        self.off(event, listener);\r\n      }\r\n      return fn.apply(this, arguments);\r\n    }\r\n\r\n    listener._origin = fn;\r\n\r\n    this._on(event, listener, prepend);\r\n\r\n    return self;\r\n  };\r\n\r\n  EventEmitter.prototype.emit = function() {\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n      if (!this._events.newListener) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all && this._all.length) {\r\n      handler = this._all.slice();\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 0; j < al; j++) args[j] = arguments[j];\r\n      }\r\n\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this, type);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this, type, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this, type, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this, args);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n      if (typeof handler === 'function') {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler.call(this);\r\n          break;\r\n        case 2:\r\n          handler.call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler.call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          args = new Array(al - 1);\r\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n          handler.apply(this, args);\r\n        }\r\n        return true;\r\n      } else if (handler) {\r\n        // need to make copy of handlers because list can change in the middle\r\n        // of emit call\r\n        handler = handler.slice();\r\n      }\r\n    }\r\n\r\n    if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this, args);\r\n        }\r\n      }\r\n      return true;\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        throw arguments[1]; // Unhandled 'error' event\r\n      } else {\r\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n      return false;\r\n    }\r\n\r\n    return !!this._all;\r\n  };\r\n\r\n  EventEmitter.prototype.emitAsync = function() {\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n        if (!this._events.newListener) { return Promise.resolve([false]); }\r\n    }\r\n\r\n    var promises= [];\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all) {\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 1; j < al; j++) args[j] = arguments[j];\r\n      }\r\n      for (i = 0, l = this._all.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(this._all[i].call(this, type));\r\n          break;\r\n        case 2:\r\n          promises.push(this._all[i].call(this, type, arguments[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\r\n          break;\r\n        default:\r\n          promises.push(this._all[i].apply(this, args));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n    }\r\n\r\n    if (typeof handler === 'function') {\r\n      this.event = type;\r\n      switch (al) {\r\n      case 1:\r\n        promises.push(handler.call(this));\r\n        break;\r\n      case 2:\r\n        promises.push(handler.call(this, arguments[1]));\r\n        break;\r\n      case 3:\r\n        promises.push(handler.call(this, arguments[1], arguments[2]));\r\n        break;\r\n      default:\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n        promises.push(handler.apply(this, args));\r\n      }\r\n    } else if (handler && handler.length) {\r\n      handler = handler.slice();\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(handler[i].call(this));\r\n          break;\r\n        case 2:\r\n          promises.push(handler[i].call(this, arguments[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\r\n          break;\r\n        default:\r\n          promises.push(handler[i].apply(this, args));\r\n        }\r\n      }\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\r\n      } else {\r\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n    }\r\n\r\n    return Promise.all(promises);\r\n  };\r\n\r\n  EventEmitter.prototype.on = function(type, listener) {\r\n    return this._on(type, listener, false);\r\n  };\r\n\r\n  EventEmitter.prototype.prependListener = function(type, listener) {\r\n    return this._on(type, listener, true);\r\n  };\r\n\r\n  EventEmitter.prototype.onAny = function(fn) {\r\n    return this._onAny(fn, false);\r\n  };\r\n\r\n  EventEmitter.prototype.prependAny = function(fn) {\r\n    return this._onAny(fn, true);\r\n  };\r\n\r\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\r\n\r\n  EventEmitter.prototype._onAny = function(fn, prepend){\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('onAny only accepts instances of Function');\r\n    }\r\n\r\n    if (!this._all) {\r\n      this._all = [];\r\n    }\r\n\r\n    // Add the function to the event listener collection.\r\n    if(prepend){\r\n      this._all.unshift(fn);\r\n    }else{\r\n      this._all.push(fn);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  EventEmitter.prototype._on = function(type, listener, prepend) {\r\n    if (typeof type === 'function') {\r\n      this._onAny(type, listener);\r\n      return this;\r\n    }\r\n\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('on only accepts instances of Function');\r\n    }\r\n    this._events || init.call(this);\r\n\r\n    // To avoid recursion in the case that type == \"newListeners\"! Before\r\n    // adding it to the listeners, first emit \"newListeners\".\r\n    this.emit('newListener', type, listener);\r\n\r\n    if (this.wildcard) {\r\n      growListenerTree.call(this, type, listener);\r\n      return this;\r\n    }\r\n\r\n    if (!this._events[type]) {\r\n      // Optimize the case of one listener. Don't need the extra array object.\r\n      this._events[type] = listener;\r\n    }\r\n    else {\r\n      if (typeof this._events[type] === 'function') {\r\n        // Change to array.\r\n        this._events[type] = [this._events[type]];\r\n      }\r\n\r\n      // If we've already got an array, just add\r\n      if(prepend){\r\n        this._events[type].unshift(listener);\r\n      }else{\r\n        this._events[type].push(listener);\r\n      }\r\n\r\n      // Check for listener leak\r\n      if (\r\n        !this._events[type].warned &&\r\n        this._maxListeners > 0 &&\r\n        this._events[type].length > this._maxListeners\r\n      ) {\r\n        this._events[type].warned = true;\r\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  EventEmitter.prototype.off = function(type, listener) {\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('removeListener only takes instances of Function');\r\n    }\r\n\r\n    var handlers,leafs=[];\r\n\r\n    if(this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n    }\r\n    else {\r\n      // does not use listeners(), so no side effect of creating _events[type]\r\n      if (!this._events[type]) return this;\r\n      handlers = this._events[type];\r\n      leafs.push({_listeners:handlers});\r\n    }\r\n\r\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n      var leaf = leafs[iLeaf];\r\n      handlers = leaf._listeners;\r\n      if (isArray(handlers)) {\r\n\r\n        var position = -1;\r\n\r\n        for (var i = 0, length = handlers.length; i < length; i++) {\r\n          if (handlers[i] === listener ||\r\n            (handlers[i].listener && handlers[i].listener === listener) ||\r\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\r\n            position = i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (position < 0) {\r\n          continue;\r\n        }\r\n\r\n        if(this.wildcard) {\r\n          leaf._listeners.splice(position, 1);\r\n        }\r\n        else {\r\n          this._events[type].splice(position, 1);\r\n        }\r\n\r\n        if (handlers.length === 0) {\r\n          if(this.wildcard) {\r\n            delete leaf._listeners;\r\n          }\r\n          else {\r\n            delete this._events[type];\r\n          }\r\n        }\r\n\r\n        this.emit(\"removeListener\", type, listener);\r\n\r\n        return this;\r\n      }\r\n      else if (handlers === listener ||\r\n        (handlers.listener && handlers.listener === listener) ||\r\n        (handlers._origin && handlers._origin === listener)) {\r\n        if(this.wildcard) {\r\n          delete leaf._listeners;\r\n        }\r\n        else {\r\n          delete this._events[type];\r\n        }\r\n\r\n        this.emit(\"removeListener\", type, listener);\r\n      }\r\n    }\r\n\r\n    function recursivelyGarbageCollect(root) {\r\n      if (root === undefined) {\r\n        return;\r\n      }\r\n      var keys = Object.keys(root);\r\n      for (var i in keys) {\r\n        var key = keys[i];\r\n        var obj = root[key];\r\n        if ((obj instanceof Function) || (typeof obj !== \"object\") || (obj === null))\r\n          continue;\r\n        if (Object.keys(obj).length > 0) {\r\n          recursivelyGarbageCollect(root[key]);\r\n        }\r\n        if (Object.keys(obj).length === 0) {\r\n          delete root[key];\r\n        }\r\n      }\r\n    }\r\n    recursivelyGarbageCollect(this.listenerTree);\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.offAny = function(fn) {\r\n    var i = 0, l = 0, fns;\r\n    if (fn && this._all && this._all.length > 0) {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++) {\r\n        if(fn === fns[i]) {\r\n          fns.splice(i, 1);\r\n          this.emit(\"removeListenerAny\", fn);\r\n          return this;\r\n        }\r\n      }\r\n    } else {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++)\r\n        this.emit(\"removeListenerAny\", fns[i]);\r\n      this._all = [];\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\r\n\r\n  EventEmitter.prototype.removeAllListeners = function(type) {\r\n    if (arguments.length === 0) {\r\n      !this._events || init.call(this);\r\n      return this;\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      var leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n\r\n      for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n        var leaf = leafs[iLeaf];\r\n        leaf._listeners = null;\r\n      }\r\n    }\r\n    else if (this._events) {\r\n      this._events[type] = null;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.listeners = function(type) {\r\n    if (this.wildcard) {\r\n      var handlers = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\r\n      return handlers;\r\n    }\r\n\r\n    this._events || init.call(this);\r\n\r\n    if (!this._events[type]) this._events[type] = [];\r\n    if (!isArray(this._events[type])) {\r\n      this._events[type] = [this._events[type]];\r\n    }\r\n    return this._events[type];\r\n  };\r\n\r\n  EventEmitter.prototype.eventNames = function(){\r\n    return Object.keys(this._events);\r\n  }\r\n\r\n  EventEmitter.prototype.listenerCount = function(type) {\r\n    return this.listeners(type).length;\r\n  };\r\n\r\n  EventEmitter.prototype.listenersAny = function() {\r\n\r\n    if(this._all) {\r\n      return this._all;\r\n    }\r\n    else {\r\n      return [];\r\n    }\r\n\r\n  };\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n     // AMD. Register as an anonymous module.\r\n    define(function() {\r\n      return EventEmitter;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    // CommonJS\r\n    module.exports = EventEmitter;\r\n  }\r\n  else {\r\n    // Browser global.\r\n    window.EventEmitter2 = EventEmitter;\r\n  }\r\n}();\r\n"]}